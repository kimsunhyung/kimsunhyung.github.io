<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>손햄의 개발 이야기</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="손햄의 개발 이야기">
<meta property="og:url" content="https://kimsunhyung.github.io/index.html">
<meta property="og:site_name" content="손햄의 개발 이야기">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="손햄의 개발 이야기" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">손햄의 개발 이야기</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://kimsunhyung.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-0727_WSL2설치_WINDOW SUBSYSTEM FOR linux설치" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/27/0727_WSL2%EC%84%A4%EC%B9%98_WINDOW%20SUBSYSTEM%20FOR%20linux%EC%84%A4%EC%B9%98/" class="article-date">
  <time class="dt-published" datetime="2022-07-27T00:00:00.000Z" itemprop="datePublished">2022-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/27/0727_WSL2%EC%84%A4%EC%B9%98_WINDOW%20SUBSYSTEM%20FOR%20linux%EC%84%A4%EC%B9%98/">0727 WSL2 설치</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="WSL2-설치-WINDOW-SUBSYSTEM-FOR-linux-설치"><a href="#WSL2-설치-WINDOW-SUBSYSTEM-FOR-linux-설치" class="headerlink" title="WSL2 설치 (WINDOW SUBSYSTEM FOR linux  설치)"></a>WSL2 설치 (WINDOW SUBSYSTEM FOR linux  설치)</h1><p>Created: 2022년 7월 27일 오전 9:21<br>Last Edited Time: 2022년 7월 27일 오후 4:39</p>
<p><img src="/images/0727/Untitled.png" alt="png"></p>
<ul>
<li>power shell 명령창을 키고</li>
</ul>
<p><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</code></p>
<p><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</code></p>
<p><code>[https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi)</code></p>
<ul>
<li>위에 두개의 명령어 작성 후 밑에 사이트로 들어가서 다운로드</li>
</ul>
<p><img src="/images/0727/Untitled1.png" alt="png"></p>
<ul>
<li>마이크로소프트 스토어에서 ubuntu 20.04.4 다운로드</li>
<li>개발은 lts에서 진행하는 것이 더 수월</li>
</ul>
<p><img src="/images/0727/Untitled2.png" alt="png"></p>
<ul>
<li>이런 창이 뜰 경우 가상 환경이 잘 세팅이 되어 있지 않다는 뜻</li>
<li>powershell 명령 창을 띄워서 가상 환경 설정 명령어 작성이 필요</li>
</ul>
<p><code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All</code></p>
<ul>
<li>작성해도  오류가 뜨면</li>
<li>검색창에 윈도우 기능 켜기를 킴 (첫번째로 진행해야 함)</li>
<li>아이디 작성 후 비밀번호 작성 시 비밀번호가 뜨지 않으니 주의해야 함.</li>
</ul>
<p><img src="/images/0727/Untitled3.png" alt="png"></p>
<ul>
<li>window 하이퍼바이저 플랫폼을 체크해야함 재부팅 후</li>
</ul>
<p><img src="/images/0727/Untitled4.png" alt="png"></p>
<ul>
<li>powershell에서</li>
</ul>
<p><code>wsl --set-default-version 2</code> 명령어를 작성</p>
<ul>
<li><p>wsl -l -v 해서 version 2가 나오지 않고 1이 반복해서 나올 경우 ubuntu 제거 후 재 설치</p>
</li>
<li><p>요약</p>
</li>
</ul>
<p>1단계 : 윈도우즈 기능&#x2F;켜기 - 하이퍼 바이저 플랫폼 클릭, 가상머신 플랫폼, Hyper-V 클릭, 컴퓨터마다 조금씩 다름.2단계 : PowerShell 관리자 권한 실행 후 아래 명령어 입력</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</span><br></pre></td></tr></table></figure>

<ul>
<li>다음 명령어 입력</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</span><br></pre></td></tr></table></figure>

<p>3단계 : 재부팅4단계 : 다운로드 및 실행하여 업데이트</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi</span><br></pre></td></tr></table></figure>

<p>5단계 : Microsoft Store 접속 및 Ubuntu 검색6단계 : Ubuntu 실행 및 ID&#x2F;PW 생성7단계 : wsl –set-default-version 2 (편집됨)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/27/0727_WSL2%EC%84%A4%EC%B9%98_WINDOW%20SUBSYSTEM%20FOR%20linux%EC%84%A4%EC%B9%98/" data-id="cl63bid9900006otvcrwu9gms" data-title="0727 WSL2 설치" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-0726_crawling기초" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/26/0726_crawling%EA%B8%B0%EC%B4%88/" class="article-date">
  <time class="dt-published" datetime="2022-07-26T00:00:00.000Z" itemprop="datePublished">2022-07-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/26/0726_crawling%EA%B8%B0%EC%B4%88/">0726_crawling기초</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>from bs4 import BeautifulSoup</p>
<h1 id="index-html-파일을-불러옴"><a href="#index-html-파일을-불러옴" class="headerlink" title="index.html 파일을 불러옴"></a>index.html 파일을 불러옴</h1><p>soup &#x3D; BeautifulSoup(open(“index.html”, encoding&#x3D;”utf-8”), “html.parser”)</p>
<h1 id="print-soup"><a href="#print-soup" class="headerlink" title="print(soup)"></a>print(soup)</h1><p>soup &#x3D; (soup.find(‘div’,class_ &#x3D; “computer”))</p>
<h1 id="print-soup-1"><a href="#print-soup-1" class="headerlink" title="print(soup)"></a>print(soup)</h1><p>soup &#x3D; soup.find(‘p’)</p>
<h1 id="print-soup-2"><a href="#print-soup-2" class="headerlink" title="print(soup)"></a>print(soup)</h1><p>final_text &#x3D;soup.get_text()<br>print(final_text)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/26/0726_crawling%EA%B8%B0%EC%B4%88/" data-id="cl61w341z00003ktv4za6fhn8" data-title="0726_crawling기초" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-0726_crawling기초2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/26/0726_crawling%EA%B8%B0%EC%B4%882/" class="article-date">
  <time class="dt-published" datetime="2022-07-26T00:00:00.000Z" itemprop="datePublished">2022-07-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/26/0726_crawling%EA%B8%B0%EC%B4%882/">0726_crawling기초2</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="import-requests"><a href="#import-requests" class="headerlink" title="import requests"></a>import requests</h1><p>from bs4 import BeautifulSoup</p>
<h1 id="url-x3D-“http-www-naver-com-quot"><a href="#url-x3D-“http-www-naver-com-quot" class="headerlink" title="url &#x3D; “http://www.naver.com&quot;"></a>url &#x3D; “<a target="_blank" rel="noopener" href="http://www.naver.com&quot;/">http://www.naver.com&quot;</a></h1><h1 id="req-x3D-requests-get-url"><a href="#req-x3D-requests-get-url" class="headerlink" title="req &#x3D; requests.get(url)"></a>req &#x3D; requests.get(url)</h1><h1 id="print-req-status-code"><a href="#print-req-status-code" class="headerlink" title="print(req.status_code)"></a>print(req.status_code)</h1><h1 id="200-이-뜨면-웹페이지가-살아-있다는-것-404가-뜰-경우-잘-못들어-간-것-이거나-사이트가-사라진-것"><a href="#200-이-뜨면-웹페이지가-살아-있다는-것-404가-뜰-경우-잘-못들어-간-것-이거나-사이트가-사라진-것" class="headerlink" title="200 이 뜨면 웹페이지가 살아 있다는 것 404가 뜰 경우 잘 못들어 간 것 이거나 사이트가 사라진 것"></a>200 이 뜨면 웹페이지가 살아 있다는 것 404가 뜰 경우 잘 못들어 간 것 이거나 사이트가 사라진 것</h1><h1 id="print-req-text"><a href="#print-req-text" class="headerlink" title="print(req.text)"></a>print(req.text)</h1><h1 id="네이버에서-기사-가져오기"><a href="#네이버에서-기사-가져오기" class="headerlink" title="네이버에서 기사 가져오기"></a>네이버에서 기사 가져오기</h1><p>import requests<br>from bs4 import BeautifulSoup</p>
<p>def crawling(soup):<br>    div &#x3D; soup.find(“div”, class_&#x3D;”list_issue”) </p>
<h1 id="사이트에서-크롤링할-것에-대해-검사-창을-열어-요소를-확인하고-대입해야-함"><a href="#사이트에서-크롤링할-것에-대해-검사-창을-열어-요소를-확인하고-대입해야-함" class="headerlink" title="사이트에서 크롤링할 것에 대해 검사 창을 열어 요소를 확인하고 대입해야 함"></a>사이트에서 크롤링할 것에 대해 검사 창을 열어 요소를 확인하고 대입해야 함</h1><pre><code># print(div)
result = []

for a in div.find_all(&quot;a&quot;):
    # print(a.get_text())
    result.append(a.get_text())

links = []
for a in div.find_all(&quot;a&quot;):
    # print(a[&#39;href&#39;])
    # result.append(a.get_text())
    links.append(a[&#39;href&#39;])

print(result)
print(links)

return None
</code></pre>
<p>def main():<br>    url &#x3D; “<a target="_blank" rel="noopener" href="https://www.naver.com/&quot;">https://www.naver.com/&quot;</a><br>    req &#x3D; requests.get(url)<br>    soup &#x3D; BeautifulSoup(req.text, “html.parser”)</p>
<pre><code>print(crawling(soup))
</code></pre>
<p>if <strong>name</strong> &#x3D;&#x3D; “<strong>main</strong>“:<br>    main()</p>
<h1 id="벅스-차트-가져오기"><a href="#벅스-차트-가져오기" class="headerlink" title="벅스 차트 가져오기"></a>벅스 차트 가져오기</h1><p>import requests<br>from bs4 import BeautifulSoup</p>
<p>def crawling(soup):<br>    tbody &#x3D; soup.find(“tbody”)<br>    # print(tbody)</p>
<pre><code>result = []

for p in tbody.find_all(&quot;p&quot;, class_=&quot;title&quot;):
    # print(p.find(&quot;a&quot;).get_text())
    result.append(p.find(&quot;a&quot;).get_text())

return result
</code></pre>
<p>def main():<br>    url &#x3D; “<a target="_blank" rel="noopener" href="https://music.bugs.co.kr/chart&quot;">https://music.bugs.co.kr/chart&quot;</a><br>    req &#x3D; requests.get(url)<br>    soup &#x3D; BeautifulSoup(req.text, “html.parser”)</p>
<pre><code>print(crawling(soup))
</code></pre>
<p>if <strong>name</strong> &#x3D;&#x3D; “<strong>main</strong>“:<br>    main()</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/26/0726_crawling%EA%B8%B0%EC%B4%882/" data-id="cl61w342e00013ktvbebd1uqm" data-title="0726_crawling기초2" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-0722_oracle_기초문법3" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/22/0722_oracle_%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%953/" class="article-date">
  <time class="dt-published" datetime="2022-07-22T00:00:00.000Z" itemprop="datePublished">2022-07-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/22/0722_oracle_%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%953/">0722_oracle_sql 기초문법3</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>– 198p<br>– 서브쿼리<br>– SELECT, FROM, WHERE<br>– FROM : 인라인 뷰<br>– 메인 쿼리 : 사원테이블에서는 id, name 출력<br>–                    부서테이블에서는 부서ID, 부서명 출력<br>–                     사원테이블의 급여가 기획부서의 평균급여보다 높은 사람<br>–                     a.salary &gt; d.avg_salary<br>– 서브쿼리 : 기획부서의 평균급여</p>
<p>SELECT<br>    a.employee_id<br>    , a.emp_name<br>    , b.department_id<br>    , b.department_name<br>FROM employees a<br>            , departments b<br>            , (SELECT AVG(c.salary) AS avg_salary<br>               FROM departments b<br>                           , employees c<br>               WHERE b.parent_id &#x3D; 90<br>                    AND b.department_id &#x3D; c.department_id) d<br>WHERE a.department_id &#x3D; b.department_id<br>    AND a.salary &gt; d.avg_salary;</p>
<p>– p.199 하단<br>– 2000년 이탈리아 평균 매출액(연평균)보다 큰 월의 평균 매출액을 구하는 것<br>– 월별 평균 매출액 쿼리</p>
<p>SELECT<br>    a.sales_month<br>    , ROUND(AVG(a.amount_sold)) AS month_avg<br>FROM<br>    sales a<br>    , customers b<br>    , countries c<br>WHERE a.sales_month BETWEEN ‘200001’ AND ‘200012’<br>    AND a.cust_id &#x3D; b.CUST_ID<br>    AND b.COUNTRY_ID &#x3D; c.COUNTRY_ID<br>    AND c.COUNTRY_NAME &#x3D; ‘Italy’ – 이탈리아<br>GROUP BY a.sales_month;</p>
<p>– 연평균 매출액 쿼리</p>
<p>SELECT<br>    ROUND(AVG(a.amount_sold)) AS year_avg<br>FROM<br>    sales a<br>    , customers b<br>    , countries c<br>WHERE a.sales_month BETWEEN ‘20001’ AND ‘200012’<br>    AND a.cust_id &#x3D; b.CUST_ID<br>    AND b.COUNTRY_ID &#x3D; c.COUNTRY_ID<br>    AND c.COUNTRY_NAME &#x3D; ‘Italy’; – 이탈리아</p>
<p>SELECT a.*<br>FROM (SELECT<br>                 a.sales_month<br>                , ROUND(AVG(a.amount_sold)) AS month_avg<br>            FROM<br>                sales a<br>                , customers b<br>                , countries c<br>            WHERE a.sales_month BETWEEN ‘200001’ AND ‘200012’<br>                AND a.cust_id &#x3D; b.CUST_ID<br>                AND b.COUNTRY_ID &#x3D; c.COUNTRY_ID<br>                AND c.COUNTRY_NAME &#x3D; ‘Italy’ – 이탈리아<br>                GROUP BY a.sales_month) a<br>                , (SELECT<br>    ROUND(AVG(a.amount_sold)) AS year_avg<br>FROM<br>    sales a<br>    , customers b<br>    , countries c<br>WHERE a.sales_month BETWEEN ‘20001’ AND ‘200012’<br>    AND a.cust_id &#x3D; b.CUST_ID<br>    AND b.COUNTRY_ID &#x3D; c.COUNTRY_ID<br>    AND c.COUNTRY_NAME &#x3D; ‘Italy’) b<br>WHERE a.month_avg &gt; b.year_avg;</p>
<p>– 계층형 쿼리<br>– p.208 부서정보<br>– p.211<br>– START WITH 조건 &amp; CONNECT BY 조건<br>– parent_id &#x3D;&#x3D; 상위 부서 정보를 가지고 있음.<br>– CONNECT BY PRIOR department_id &#x3D; parent_id</p>
<p>SELECT<br>    department_id<br>    , LPAD(‘ ‘, 3 * (LEVEL - 1)) || department_name, LEVEL<br>FROM departments<br>START WITH parent_id IS NULL<br>CONNECT BY PRIOR department_id &#x3D; parent_id;</p>
<p>– 사원테이블에 있는 manager_id, employee_id</p>
<p>SELECT<br>    a.employee_id<br>    , LPAD(‘ ‘, 3 * (LEVEL-1)) || a.emp_name<br>    , LEVEL<br>    , b.department_name<br>FROM<br>    employees a<br>    , departments b<br>WHERE a.department_id &#x3D; b.department_id<br>START WITH a.manager_id IS NULL<br>CONNECT BY PRIOR a.employee_id &#x3D; a.manager_id;</p>
<p>– p.213</p>
<p>SELECT<br>    a.employee_id<br>    , LPAD(‘ ‘, 3 * (LEVEL-1)) || a.emp_name<br>    , LEVEL<br>    , b.department_name<br>    , a.department_id<br>FROM<br>    employees a<br>    , departments b<br>WHERE a.department_id &#x3D; b.department_id<br>START WITH a.manager_id IS NULL<br>CONNECT BY NOCYCLE PRIOR a.employee_id &#x3D; a.manager_id<br>    AND a.department_id &#x3D; 30;</p>
<p>– 계층형 쿼리 심화학습<br>– 쿼리가 나옴. ORDER BY 정렬 가능<br>– ORDER SIBLINGS BY </p>
<p>SELECT<br>    department_id<br>    , LPAD(‘ ‘, 3 * (LEVEL-1)) || department_name<br>    , LEVEL<br>FROM departments<br>START WITH parent_id IS NULL<br>CONNECT BY PRIOR department_id &#x3D; parent_id<br>ORDER SIBLINGS BY department_name;</p>
<p>– 연산자</p>
<p>SELECT<br>    department_id<br>    , LPAD(‘ ‘, 3 * (LEVEL-1)) || department_name<br>    , LEVEL<br>    , CONNECT_BY_ROOT department_name AS root_name<br>FROM departments<br>START WITH parent_id IS NULL<br>CONNECT BY PRIOR department_id &#x3D; parent_id;</p>
<p>– p.216 CONNECT_BY_ISLEAF<br>– 계층형 쿼리 응용<br>– 샘플 데이터 만들기</p>
<p>CREATE TABLE ex7_1 AS<br>SELECT<br>    ROWNUM seq<br>    , ‘2014’ || LPAD(CEIL(ROWNUM&#x2F;1000), 2, ‘0’) month<br>    , ROUND(DBMS_RANDOM.VALUE(100, 1000)) amt<br>FROM DUAL<br>CONNECT BY LEVEL &lt;&#x3D; 12000;</p>
<p>SELECT * FROM ex7_1;</p>
<p>SELECT<br>    month<br>    , SUM(amt)<br>FROM ex7_1<br>GROUP BY month<br>ORDER BY month;</p>
<p>– WITH절<br>– 서브쿼리의 가독성 향상<br>– 연도별, 최종, 월별 </p>
<p>WITH b2 AS (<br>    SELECT<br>        period<br>        , region<br>        , sum(loan_jan_amt) jan_amt<br>    FROM kor_loan_status<br>    GROUP BY period, region<br>)</p>
<p>SELECT b2.* FROM b2;</p>
<p>—- p231<br>—- 분석함수 window 함수<br>—- 문법<br>—- 분석함수(매개변수) over(partition by)<br>—- 분석함수<br>—- row_number()&#x2F;rownum</p>
<p>SELECT<br>    department_id<br>    ,emp_name<br>    ,ROW_NUMBER()OVER(PARTITION BY department_id<br>                        ORDER BY department_id,emp_name)dep_rows<br>FROM employees;</p>
<p>SELECT<br>    department_id<br>    ,emp_name<br>    , RANK()OVER(PARTITION BY department_id ORDER BY salary)dep_rank<br>FROM employees;</p>
<p>SELECT department_id<br>        , emp_name<br>        ,salary<br>        ,DENSE_RANK() OVER (PARTITION BY department_id ORDER BY salary ) dep_rank<br>      FROM employees;</p>
<p>—- p.234<br>—- WITH 절 응용</p>
<p>with temp AS (<br>SELECT<br>    department_id<br>    , emp_name<br>    , salary<br>    – , RANK () OVER (PARTITION BY department_id ORDER BY salary) dep_rank<br>    , DENSE_RANK () OVER (PARTITION BY department_id ORDER BY salary) dep_rank<br>FROM employees)</p>
<p>SELECT *<br>FROM (SELECT<br>    department_id<br>    , emp_name<br>    , salary<br>    – , RANK () OVER (PARTITION BY department_id ORDER BY salary) dep_rank<br>    , DENSE_RANK () OVER (PARTITION BY department_id ORDER BY salary) dep_rank<br>FROM employees)<br>WHERE dep_rank &lt;&#x3D; 3;</p>
<p>—- CUME_DIST : 상대적인 누적분포도 값 반환</p>
<p>SELECT<br>    department_id<br>    , emp_name<br>    , salary<br>    ,CUME_DIST()OVER(PARTITION BY department_id<br>                    ORDER BY salary)dep_dist<br>FROM employees;</p>
<p>—- PERCENT_RANK<br>—- 백분위 순위 반환<br>—- 60번 부서에 대한 CUME_DIST, PERCENT_RANK 값 조회</p>
<p>—- P.236<br>—- NTIME(숫자) 함수<br>—- 5개의 행을 숫자 만큼 담는다</p>
<p> SELECT<br>    department_id<br>    , emp_name<br>    , salary<br>    , NTILE(4) OVER (PARTITION BY department_id ORDER BY salary) NTILES<br>FROM employees<br>WHERE department_id IN (30, 60);</p>
<p>—- LAG - 선행 로우 값 반환<br>—- LEAD - 후행 로우 값 반환<br>—- 로우가 없을 시 DEFAULT로 명시한 값 반환 </p>
<p> SELECT<br>    emp_name<br>    , hire_date<br>    , salary<br>    , LAG(salary, 1, 0)  OVER (ORDER BY hire_date) AS prev_sal<br>    , LEAD(salary, 1, 0) OVER (ORDER BY hire_date) AS next_sal<br>FROM employees<br>WHERE department_id &#x3D; 30;</p>
<p>—- WINDOW 함수<br>—- P.240<br>—- 정렬은 입사일자 순 처리<br>—- UNBOUNDED PRECEDING 급여, 부서별 입사일자가 가장 빠른 사원<br>—- UNBOUNDED FOLLOWING 부서별 입사잊자가 가장 늦은 사원<br>—- 누적 합계</p>
<p>SELECT<br>    department_id<br>    , emp_name<br>    , hire_date<br>    , salary<br>    , SUM(salary)OVER(PARTITION BY department_id ORDER BY hire_date<br>                    ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING)AS all_salary<br>FROM employees<br>WHERE  department_id IN(30,90);</p>
<p>SELECT<br>    department_id<br>    , emp_name<br>    , hire_date<br>    , salary<br>    , SUM(salary)OVER(PARTITION BY department_id ORDER BY hire_date<br>                    ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING)AS all_salary<br>    , SUM(salary)OVER(PARTITION BY department_id ORDER BY hire_date<br>                    ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW)AS first_current_sal<br>    , SUM(salary)OVER(PARTITION BY department_id ORDER BY hire_date<br>                    ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)AS current_end_sal           </p>
<p>FROM employees<br>WHERE  department_id IN(30,90);<br>&#96;&#96;&#96;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/22/0722_oracle_%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%953/" data-id="cl5w6ft0e0000yktv4mtzcszp" data-title="0722_oracle_sql 기초문법3" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-0721_oracler_sql기초문법2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/21/0721_oracler_sql%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%952/" class="article-date">
  <time class="dt-published" datetime="2022-07-21T00:00:00.000Z" itemprop="datePublished">2022-07-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/21/0721_oracler_sql%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%952/">0721_oracle_sql 기초문법2</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="기본집계함수"><a href="#기본집계함수" class="headerlink" title="기본집계함수"></a>기본집계함수</h2><p>SELECT count(*) FROM employees;</p>
<p>SELECT count(employee_id) FROM employees;</p>
<h4 id="NULL은-카운트-하지-않음"><a href="#NULL은-카운트-하지-않음" class="headerlink" title="NULL은 카운트 하지 않음"></a>NULL은 카운트 하지 않음</h4><p>SELECT count(department_id) FROM employees;</p>
<h4 id="유일한-값만-조회됨"><a href="#유일한-값만-조회됨" class="headerlink" title="유일한 값만 조회됨"></a>유일한 값만 조회됨</h4><p>SELECT count(DISTINCT department_id)<br>FROM employees;</p>
<h4 id="정렬"><a href="#정렬" class="headerlink" title="정렬"></a>정렬</h4><p>SELECT DISTINCT department_id<br>FROM employees<br>order by 1;</p>
<h2 id="p-154-기초-통계량"><a href="#p-154-기초-통계량" class="headerlink" title="p.154 기초 통계량"></a>p.154 기초 통계량</h2><p>####합계, 평균, 최소, 최대, 분산, 표준편차</p>
<h4 id="SQL-gt-통계도구-amp-머신러닝-데이터-과학도구로-변환"><a href="#SQL-gt-통계도구-amp-머신러닝-데이터-과학도구로-변환" class="headerlink" title="SQL ##&gt; 통계도구 &amp; 머신러닝, 데이터 과학도구로 변환"></a>SQL ##&gt; 통계도구 &amp; 머신러닝, 데이터 과학도구로 변환</h4><p>SELECT SUM(salary)<br>FROM employees;</p>
<p>SELECT SUM(salary), SUM(DISTINCT salary)<br>FROM employees;</p>
<h4 id="평균값"><a href="#평균값" class="headerlink" title="평균값"></a>평균값</h4><p>SELECT AVG(salary), AVG(DISTINCT salary)<br>FROM employees;</p>
<h4 id="최대값-최소값"><a href="#최대값-최소값" class="headerlink" title="최대값, 최소값"></a>최대값, 최소값</h4><p>SELECT MIN(salary), MAX(salary)<br>FROM employees;</p>
<p>SELECT MIN(DISTINCT salary), MAX(DISTINCT salary)<br>FROM employees;</p>
<h4 id="분산-및-표준편차"><a href="#분산-및-표준편차" class="headerlink" title="분산 및 표준편차"></a>분산 및 표준편차</h4><p>SELECT VARIANCE(salary), STDDEV(salary)<br>FROM employees;</p>
<h4 id="GROUP-BY-HAVING"><a href="#GROUP-BY-HAVING" class="headerlink" title="GROUP BY, HAVING"></a>GROUP BY, HAVING</h4><h4 id="그전까지는-전체-데이터를-기준으로-집계"><a href="#그전까지는-전체-데이터를-기준으로-집계" class="headerlink" title="그전까지는 전체 데이터를 기준으로 집계"></a>그전까지는 전체 데이터를 기준으로 집계</h4><p>SELECT<br>    department_id<br>    ,SUM(salary)<br>FROM employees<br>GROUP BY department_id<br>ORDER BY department_id;</p>
<p>SELECT*<br>FROM kor_loan_status;##가계대출 단위 십억<br>SELECT<br>    period<br>    , region<br>    , SUM(loan_jan_amt)totl_jan<br>FROM kor_loan_status<br>WHERE period LIKE ‘2013%’<br>GROUP BY period, region<br>ORDER BY period, region;</p>
<p>####2013년  11월 총 잔액만 구하기</p>
<p>SELECT<br>    period<br>    , region<br>    , SUM(loan_jan_amt)totl_jan<br>FROM KOR_LOAN_STATUS<br>WHERE period &#x3D; ‘201311’<br>GROUP BY region<br>ORDER BY region;</p>
<h4 id="period-가-group-by-에-명시될만한-컬럼이-되지-않아-오류가-남"><a href="#period-가-group-by-에-명시될만한-컬럼이-되지-않아-오류가-남" class="headerlink" title="period 가 group by 에 명시될만한 컬럼이 되지 않아 오류가 남."></a>period 가 group by 에 명시될만한 컬럼이 되지 않아 오류가 남.</h4><p>SELECT<br>    period<br>    , region<br>    , SUM(loan_jan_amt)totl_jan<br>FROM KOR_LOAN_STATUS<br>WHERE period &#x3D; ‘201311’<br>GROUP BY period, region<br>HAVING SUM(loan_jan_amt)&gt;100000<br>ORDER BY region;</p>
<h4 id="ROLLUP-CUBE"><a href="#ROLLUP-CUBE" class="headerlink" title="ROLLUP, CUBE"></a>ROLLUP, CUBE</h4><p>SELECT period, gubun, SUM(loan_jan_amt)totl_jan<br>FROM kor_loan_status<br>WHERE period LIKE ‘2013%’<br>GROUP BY period, gubun<br>ORDER BY period;</p>
<h4 id="ROLLUP-추가적인-집계-정보를-순차적으로-반환"><a href="#ROLLUP-추가적인-집계-정보를-순차적으로-반환" class="headerlink" title="ROLLUP 추가적인 집계 정보를 순차적으로 반환"></a>ROLLUP 추가적인 집계 정보를 순차적으로 반환</h4><p>SELECT period, gubun, SUM(loan_jan_amt)totl_jan<br>FROM kor_loan_status<br>WHERE period LIKE ‘2013%’<br>GROUP BY ROLLUP(period, gubun);</p>
<h4 id="CUBE-조합별로-집계한-정보를-반환"><a href="#CUBE-조합별로-집계한-정보를-반환" class="headerlink" title="CUBE 조합별로 집계한 정보를 반환"></a>CUBE 조합별로 집계한 정보를 반환</h4><p>SELECT period, gubun, SUM(loan_jan_amt)totl_jan<br>FROM kor_loan_status<br>WHERE period LIKE ‘2013%’<br>GROUP BY CUBE(period, gubun);</p>
<h4 id="위치가-달라질-때마다-반환되는-값이-다름"><a href="#위치가-달라질-때마다-반환되는-값이-다름" class="headerlink" title="위치가 달라질 때마다 반환되는 값이 다름"></a>위치가 달라질 때마다 반환되는 값이 다름</h4><h4 id="집합연산자"><a href="#집합연산자" class="headerlink" title="집합연산자"></a>집합연산자</h4><p>CREATE TABLE exp_goods_asia (<br>           country VARCHAR2(10),<br>           seq     NUMBER,<br>           goods   VARCHAR2(80));</p>
<pre><code>INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 1, &#39;원유제외 석유류&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 2, &#39;자동차&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 3, &#39;전자집적회로&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 4, &#39;선박&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 5,  &#39;LCD&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 6,  &#39;자동차부품&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 7,  &#39;휴대전화&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 8,  &#39;환식탄화수소&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 9,  &#39;무선송신기 디스플레이 부속품&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;한국&#39;, 10,  &#39;철 또는 비합금강&#39;);

INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 1, &#39;자동차&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 2, &#39;자동차부품&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 3, &#39;전자집적회로&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 4, &#39;선박&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 5, &#39;반도체웨이퍼&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 6, &#39;화물차&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 7, &#39;원유제외 석유류&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 8, &#39;건설기계&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 9, &#39;다이오드, 트랜지스터&#39;);
INSERT INTO exp_goods_asia VALUES (&#39;일본&#39;, 10, &#39;기계류&#39;);
</code></pre>
<p>commit;</p>
<p>SELECT * FROM exp_goods_asia;</p>
<p>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘한국’<br>ORDER BY seq</p>
<p>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘일본’<br>ORDER BY seq</p>
<h4 id="두국가가-겹치는-수출품목은-한번만-조회하도록-함"><a href="#두국가가-겹치는-수출품목은-한번만-조회하도록-함" class="headerlink" title="두국가가 겹치는 수출품목은 한번만 조회하도록 함"></a>두국가가 겹치는 수출품목은 한번만 조회하도록 함</h4><h4 id="UNION-두-데이터-집합이-있으면-각-집합-원소를-모두-포함한-결과-반환하는-합집합-함수"><a href="#UNION-두-데이터-집합이-있으면-각-집합-원소를-모두-포함한-결과-반환하는-합집합-함수" class="headerlink" title="UNION 두 데이터 집합이 있으면 각 집합 원소를 모두 포함한 결과 반환하는 합집합 함수"></a>UNION 두 데이터 집합이 있으면 각 집합 원소를 모두 포함한 결과 반환하는 합집합 함수</h4><p>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘한국’<br>UNION<br>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘일본’;</p>
<h4 id="UNION-ALL-중복된-데이터도-모두-반환함"><a href="#UNION-ALL-중복된-데이터도-모두-반환함" class="headerlink" title="UNION ALL  중복된 데이터도 모두 반환함"></a>UNION ALL  중복된 데이터도 모두 반환함</h4><p>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘한국’<br>UNION ALL<br>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘일본’;</p>
<h4 id="INTERSECT-공통된-항목만-반환하는-교집합-함수"><a href="#INTERSECT-공통된-항목만-반환하는-교집합-함수" class="headerlink" title="INTERSECT, 공통된 항목만 반환하는 교집합 함수"></a>INTERSECT, 공통된 항목만 반환하는 교집합 함수</h4><p>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘한국’<br>INTERSECT<br>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘일본’;</p>
<h4 id="MINUS-공통된-항목을-제외한-항목만-반환하는-차집합"><a href="#MINUS-공통된-항목을-제외한-항목만-반환하는-차집합" class="headerlink" title="MINUS 공통된 항목을 제외한 항목만 반환하는 차집합"></a>MINUS 공통된 항목을 제외한 항목만 반환하는 차집합</h4><p>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘한국’<br>MINUS<br>SELECT goods<br>FROM exp_goods_asia<br>WHERE country &#x3D; ‘일본’;</p>
<h4 id="GROUPING-SETS"><a href="#GROUPING-SETS" class="headerlink" title="GROUPING SETS"></a>GROUPING SETS</h4><p>SELECT<br>    period, gubun, SUM(loan_jan_amt)totl_jan<br>FROM kor_loan_status<br>WHERE period LIKE ‘2013%’<br>GROUP BY GROUPING SETS(period,gubun);</p>
<p>SELECT<br>    period, gubun, region, SUM(loan_jan_amt)totl_jan<br>FROM kor_loan_status<br>WHERE period LIKE ‘2013%’<br>    AND region IN(‘서울’,’경기’)<br>GROUP BY GROUPING SETS(period,(gubun,region));</p>
<h4 id="불친절한-pl-x2F-sql-프로그래밍-책-읽어보기"><a href="#불친절한-pl-x2F-sql-프로그래밍-책-읽어보기" class="headerlink" title="불친절한 pl&#x2F;sql 프로그래밍 책 읽어보기"></a>불친절한 pl&#x2F;sql 프로그래밍 책 읽어보기</h4><p>SELECT a.employee_id<br>        , a.emp_name<br>        , a.department_id<br>        , b.department_name<br>FROM employees a, departments b<br>WHERE a.department_id &#x3D; b.department_id;</p>
<h2 id="세미-조인"><a href="#세미-조인" class="headerlink" title="세미 조인"></a>세미 조인</h2><h4 id="서브-쿼리를-이용해-서브쿼리에-존재하는-데이터만-메인-쿼리에서-추출"><a href="#서브-쿼리를-이용해-서브쿼리에-존재하는-데이터만-메인-쿼리에서-추출" class="headerlink" title="서브 쿼리를 이용해 서브쿼리에 존재하는 데이터만 메인 쿼리에서 추출"></a>서브 쿼리를 이용해 서브쿼리에 존재하는 데이터만 메인 쿼리에서 추출</h4><h4 id="exist"><a href="#exist" class="headerlink" title="exist"></a>exist</h4><p>SELECT<br>    department_id<br>    , department_name<br>FROM departments a<br>WHERE EXISTS(SELECT*<br>    FROM departments a, employees b<br>    WHERE a.department_id &#x3D; b.department_id<br>    AND b.salary&gt;3000);</p>
<p>SELECT<br>    department_id<br>    , department_name<br>FROM departments a<br>    WHERE a.department_id IN(SELECT b.department_id<br>                            FROM employees b<br>                            WHERE b.salary&gt; 3000)<br>ORDER BY department_name;</p>
<p>SELECT<br>    a.department_id<br>    , a.department_name<br>FROM departments a, employees b<br>WHERE a.department_id &#x3D; b.department_id<br>    AND b.salary &gt;3000<br>ORDER BY a.department_name;</p>
<h4 id="안티조인"><a href="#안티조인" class="headerlink" title="안티조인"></a>안티조인</h4><h4 id="세미조인의-반대-개념"><a href="#세미조인의-반대-개념" class="headerlink" title="세미조인의 반대 개념"></a>세미조인의 반대 개념</h4><h4 id="NOT-EXSITS-NOT-IN"><a href="#NOT-EXSITS-NOT-IN" class="headerlink" title="NOT EXSITS, NOT IN"></a>NOT EXSITS, NOT IN</h4><p>SELECT<br>    a. employee_id<br>    , a.emp_name<br>    , a.department_id<br>    , b.department_name<br>FROM employees a<br>    , departments b<br>WHERE a.department_id &#x3D; b.department_id<br>    AND a.department_id NOT IN(SELECT department_id<br>                                FROM departments<br>                                WHERE manager_id IS NULL);</p>
<h4 id="P-180"><a href="#P-180" class="headerlink" title="P. 180"></a>P. 180</h4><p>SELECT count(*)<br>FROM employees a<br>WHERE NOT EXISTS(SELECT 1<br>                FROM departments C<br>                WHERE a.department_id &#x3D; c.department_id<br>                    AND manager_id IS NULL)</p>
<h4 id="셀프-조인"><a href="#셀프-조인" class="headerlink" title="셀프 조인"></a>셀프 조인</h4><h4 id="조인을-하려면-두개의-테이블"><a href="#조인을-하려면-두개의-테이블" class="headerlink" title="조인을 하려면 두개의 테이블"></a>조인을 하려면 두개의 테이블</h4><h4 id="하나의-테이블을-두개로-분리"><a href="#하나의-테이블을-두개로-분리" class="headerlink" title="하나의 테이블을 두개로 분리"></a>하나의 테이블을 두개로 분리</h4><h4 id="테이블-자기자신과-연결"><a href="#테이블-자기자신과-연결" class="headerlink" title="테이블 자기자신과 연결"></a>테이블 자기자신과 연결</h4><h4 id="같은-부서-번호를-가진-사원-중-A사원번호가-B사원보다-작은-것-조회"><a href="#같은-부서-번호를-가진-사원-중-A사원번호가-B사원보다-작은-것-조회" class="headerlink" title="같은 부서 번호를 가진 사원 중 A사원번호가 B사원보다 작은 것 조회"></a>같은 부서 번호를 가진 사원 중 A사원번호가 B사원보다 작은 것 조회</h4><p>SELECT<br>    a.employee_id<br>    , a.emp_name<br>    , b.employee_id<br>    , b.emp_name<br>    , a.department_id<br>FROM<br>    employees a<br>    , employees b<br>WHERE a.employee_id &lt; b.employee_id<br>    AND a.department_id &#x3D; b.department_id<br>    AND a.department_id &#x3D;20;</p>
<h4 id="p-181-일반-조인"><a href="#p-181-일반-조인" class="headerlink" title="p.181 일반 조인"></a>p.181 일반 조인</h4><p>SELECT<br>    a.department_id<br>    , a.department_name<br>    , b.job_id<br>    , b.department_id<br>FROM departments a,<br>     job_history b<br>WHERE a.department_id &#x3D; b.department_id;</p>
<h4 id="외부조인"><a href="#외부조인" class="headerlink" title="외부조인"></a>외부조인</h4><p>SELECT<br>    a.department_id<br>    , a.department_name<br>    , b.job_id<br>    , b.department_id<br>FROM departments a,<br>     job_history b<br>WHERE a.department_id &#x3D; b.department_id(+);</p>
<p>SELECT<br>    a.employee_id<br>    , a. emp_name<br>    , b.job_id<br>    , b.department_id<br>FROM employees a<br>     , job_history b<br>WHERE a.employee_id &#x3D; b.employee_id(+)<br>    AND a.department_id &#x3D; b.department_id;</p>
<p>SELECT<br>    a.employee_id<br>    , a. emp_name<br>    , b.job_id<br>    , b.department_id<br>FROM employees a<br>     , job_history b<br>WHERE a.employee_id &#x3D; b.employee_id(+)<br>    AND a.department_id &#x3D; b.department_id(+);</p>
<h4 id="ansi조인"><a href="#ansi조인" class="headerlink" title="ansi조인"></a>ansi조인</h4><p>SELECT<br>    a.employee_id<br>    , a.emp_name<br>    , b.department_id<br>    , b.department_name<br>FROM employees a<br>INNER JOIN departments b<br>    ON(a.department_id &#x3D; b.department_id)<br>WHERE a.hire_date&gt;&#x3D;TO_DATE(‘2003-01-01’,’YYYY-MM-DD’)</p>
<h4 id="p-186"><a href="#p-186" class="headerlink" title="p.186"></a>p.186</h4><h4 id="외부조인-1"><a href="#외부조인-1" class="headerlink" title="외부조인"></a>외부조인</h4><p>SELECT<br>    a.employee_id<br>    , a.emp_name<br>    , b.job_id<br>    , b.department_id<br>FROM employees a<br>LEFT OUTER JOIN job_history b<br>    ON(a.employee_id &#x3D; b.employee_id<br>        and a.department_id &#x3D; b.department_id);</p>
<p>SELECT<br>    a.employee_id<br>    , a.emp_name<br>    , b.job_id<br>    , b.department_id<br>FROM employees a<br>RIGHT OUTER JOIN job_history b<br>    ON(a.employee_id &#x3D; b.employee_id<br>        and a.department_id &#x3D; b.department_id);</p>
<h2 id="서브쿼리"><a href="#서브쿼리" class="headerlink" title="서브쿼리"></a>서브쿼리</h2><h4 id="SQL-수업의-하이라이트"><a href="#SQL-수업의-하이라이트" class="headerlink" title="SQL 수업의 하이라이트"></a>SQL 수업의 하이라이트</h4><h4 id="서브쿼리가-사용되는-위치-SELECT-FROM-WHERE"><a href="#서브쿼리가-사용되는-위치-SELECT-FROM-WHERE" class="headerlink" title="서브쿼리가 사용되는 위치 SELECT, FROM, WHERE"></a>서브쿼리가 사용되는 위치 SELECT, FROM, WHERE</h4><p>SELECT AVG(salary)FROM employees;</p>
<h4 id="배치-자동화"><a href="#배치-자동화" class="headerlink" title="배치 자동화"></a>배치 자동화</h4><p>SELECT count(*)<br>FROM employees<br>WHERE salary &gt;&#x3D; (SELECT AVG(salary)FROM employees);</p>
<p>SELECT count(*)<br>FROM employees<br>WHERE salary &gt;&#x3D; 서브쿼리에서 출력되는 값이 단일 행;</p>
<h4 id="IN-복수-결과값을-넣을-수-있음"><a href="#IN-복수-결과값을-넣을-수-있음" class="headerlink" title="IN(복수 결과값을 넣을 수 있음)"></a>IN(복수 결과값을 넣을 수 있음)</h4><p>SELECT count(*)<br>FROM employees<br>WHERE department_id IN(SELECT department_id<br>                       FROM departments<br>                       WHERE parent_id IS NULL)</p>
<p>SELECT employee_id<br>       , emp_name<br>       , job_id<br>FROM employees<br>WHERE (employee_id,job_id) IN(SELECT EMPLOYEE_ID<br>                                     , job_id<br>                                     FROM job_history);</p>
<h4 id="서브쿼리-SELECT-뿐아니라-UPDATE-DELETE에도-사용"><a href="#서브쿼리-SELECT-뿐아니라-UPDATE-DELETE에도-사용" class="headerlink" title="서브쿼리 SELECT 뿐아니라 UPDATE, DELETE에도 사용"></a>서브쿼리 SELECT 뿐아니라 UPDATE, DELETE에도 사용</h4><h4 id="전-사원의-급여를-평균-금액으로-갱신"><a href="#전-사원의-급여를-평균-금액으로-갱신" class="headerlink" title="전 사원의 급여를 평균 금액으로 갱신"></a>전 사원의 급여를 평균 금액으로 갱신</h4><p>CREATE TABLE employees0721 AS<br>SELECT*FROM employees;</p>
<h4 id="p-x2F-194-하단-SELECT에-서브쿼리"><a href="#p-x2F-194-하단-SELECT에-서브쿼리" class="headerlink" title="p&#x2F;194 하단 SELECT에 서브쿼리"></a>p&#x2F;194 하단 SELECT에 서브쿼리</h4><p>SELECT<br>    a.employee_id<br>    ,(SELECT b.emp_name<br>      FROM employees b<br>      WHERE a.employee_id &#x3D;b.employee_id) AS emp_name<br>    , a.department_id<br>    , (SELECT b.department_name<br>      FROM departments b<br>      WHERE a.department_id &#x3D; b.department_id) AS dep_name<br>FROM job_history a;</p>
<h4 id="메인쿼리"><a href="#메인쿼리" class="headerlink" title="메인쿼리"></a>메인쿼리</h4><p>SELECT<br>FROM<br>WHERE(서브쿼리(서브쿼리2))</p>
<p>SELECT<br>    a.department_id<br>    ,a.department_name<br>FROM departments a<br>WHERE EXISTS(SELECT 1<br>             FROM employees b<br>             WHERE a.department_id &#x3D; b.department_id<br>             AND b.salary&gt;(SELECT avg(salary)FROM employees)<br>             );</p>
<h4 id="메인-쿼리-부서테이블에서-부서-ID와-부서명"><a href="#메인-쿼리-부서테이블에서-부서-ID와-부서명" class="headerlink" title="메인 쿼리, 부서테이블에서 부서 ID와 부서명"></a>메인 쿼리, 부서테이블에서 부서 ID와 부서명</h4><h4 id="P-196"><a href="#P-196" class="headerlink" title="P.196"></a>P.196</h4><h4 id="메인쿼리-사원-테이블의-사원들의-부서별-평균-급여를-조회"><a href="#메인쿼리-사원-테이블의-사원들의-부서별-평균-급여를-조회" class="headerlink" title="메인쿼리 : 사원 테이블의 사원들의 부서별 평균 급여를 조회"></a>메인쿼리 : 사원 테이블의 사원들의 부서별 평균 급여를 조회</h4><h4 id="서브쿼리-상위부서가-기획부-부서-번호가-90-에-속함"><a href="#서브쿼리-상위부서가-기획부-부서-번호가-90-에-속함" class="headerlink" title="서브쿼리 : 상위부서가 기획부(부서 번호가 90)에 속함"></a>서브쿼리 : 상위부서가 기획부(부서 번호가 90)에 속함</h4><p>SELECT department_id,AVG(salary)<br>FROM employees<br>WHERE department_id IN(SELECT department_id<br>                       FROM departments<br>                       WHERE parent_id &#x3D; 90)<br>GROUP BY department_id;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/21/0721_oracler_sql%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%952/" data-id="cl5uqia9y00009gtv34866git" data-title="0721_oracle_sql 기초문법2" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-0720_oracler_sql기초문법" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/20/0720_oracler_sql%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%95/" class="article-date">
  <time class="dt-published" datetime="2022-07-20T00:00:00.000Z" itemprop="datePublished">2022-07-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/20/0720_oracler_sql%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%95/">0720_oracle_sql 기초문법</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="SELECT-문"><a href="#SELECT-문" class="headerlink" title="SELECT 문"></a>SELECT 문</h2><h2 id="P-92"><a href="#P-92" class="headerlink" title="P.92"></a>P.92</h2><h2 id="급여가-5000이-넘는-사원번호와-사원명-조회"><a href="#급여가-5000이-넘는-사원번호와-사원명-조회" class="headerlink" title="급여가 5000이 넘는 사원번호와 사원명 조회"></a>급여가 5000이 넘는 사원번호와 사원명 조회</h2><p>SELECT * FROM employees;<br>SELECT<br>    employee_id<br>    , emp_name<br>    , salary<br>FROM employees<br>WHERE salary &lt; 3000<br>ORDER BY employee_id;</p>
<h2 id="급여가-5000-이상-job-id-it-prog-사원조회"><a href="#급여가-5000-이상-job-id-it-prog-사원조회" class="headerlink" title="급여가 5000 이상, job_id, it_prog 사원조회"></a>급여가 5000 이상, job_id, it_prog 사원조회</h2><p>SELECT employee_id<br>    , emp_name<br>    , salary<br>FROM employees<br>WHERE salary &gt;5000<br>    AND job_id &#x3D; ‘IT_PROG’<br>ORDER BY employee_id;</p>
<h2 id="테이블에-별칭-줄-수-있음"><a href="#테이블에-별칭-줄-수-있음" class="headerlink" title="테이블에 별칭 줄 수 있음"></a>테이블에 별칭 줄 수 있음</h2><p>SELECT</p>
<h2 id="a테이블에서-옴"><a href="#a테이블에서-옴" class="headerlink" title="a테이블에서 옴"></a>a테이블에서 옴</h2><pre><code>a.employee_id
, a.emp_name
, a.department_id
, b.department_name
</code></pre>
<h2 id="b테이블에서-옴"><a href="#b테이블에서-옴" class="headerlink" title="b테이블에서 옴"></a>b테이블에서 옴</h2><p>FROM<br>    employees a,<br>    departments b<br>WHERE a.department_id &#x3D;  b.department_id;</p>
<h2 id="insert-문-amp-updated-문"><a href="#insert-문-amp-updated-문" class="headerlink" title="insert 문 &amp; updated 문"></a>insert 문 &amp; updated 문</h2><h2 id="4교시-개별진행"><a href="#4교시-개별진행" class="headerlink" title="4교시 개별진행"></a>4교시 개별진행</h2><h2 id="p101"><a href="#p101" class="headerlink" title="p101"></a>p101</h2><h2 id="merge-데이터를-합치거나-추가"><a href="#merge-데이터를-합치거나-추가" class="headerlink" title="merge, 데이터를 합치거나 추가"></a>merge, 데이터를 합치거나 추가</h2><h2 id="조건을-비교해서-테이블에-해당-조건에-맞는-데이터가-없으면-추가"><a href="#조건을-비교해서-테이블에-해당-조건에-맞는-데이터가-없으면-추가" class="headerlink" title="조건을 비교해서 테이블에 해당 조건에 맞는 데이터가 없으면 추가"></a>조건을 비교해서 테이블에 해당 조건에 맞는 데이터가 없으면 추가</h2><h2 id="있으면-UPDATE문을-추가"><a href="#있으면-UPDATE문을-추가" class="headerlink" title="있으면 UPDATE문을 추가"></a>있으면 UPDATE문을 추가</h2><p>CREATE TABLE ex3_3(<br>    employee_id NUMBER<br>    , bonus_amt NUMBER DEFAULT 0<br>);</p>
<p>INSERT INTO ex3_3(employee_id)<br>SELECT<br>    e.employee_id<br>FROM employees e, sales s<br>WHERE e.employee_id &#x3D; s.employee_id<br>    AND s.SALES_MONTH BETWEEN ‘200010’ AND ‘200012’<br>GROUP BY e.employee_id;</p>
<p>SELECT*FROM ex3_3 ORDER BY employee_id;</p>
<h2 id="103p"><a href="#103p" class="headerlink" title="103p"></a>103p</h2><p>SELECT employee_id<br>    , manager_id<br>    , salary<br>    , salary * 0.01<br>FroM employees<br>WHERE employee_id IN(SELECT employee_id FROM ex3_3);</p>
<p>SELECT employee_id<br>    , manager_id<br>    , salary<br>    , salary * 0.001<br>FroM employees<br>WHERE employee_id NOT IN(SELECT employee_id FROM ex3_3)<br>    AND manager_id &#x3D; 146;</p>
<h2 id="MERGE-를-통해-작성"><a href="#MERGE-를-통해-작성" class="headerlink" title="MERGE 를 통해 작성"></a>MERGE 를 통해 작성</h2><h2 id="관리자-사번-146인-것-중-ex3-3-테이블에-없는"><a href="#관리자-사번-146인-것-중-ex3-3-테이블에-없는" class="headerlink" title="관리자 사번 146인 것 중, ex3_3 테이블에 없는"></a>관리자 사번 146인 것 중, ex3_3 테이블에 없는</h2><h2 id="사원의-사번-관리자-사번-급여-급여-0-001-조회"><a href="#사원의-사번-관리자-사번-급여-급여-0-001-조회" class="headerlink" title="사원의 사번, 관리자 사번, 급여, 급여*0.001 .조회"></a>사원의 사번, 관리자 사번, 급여, 급여*0.001 .조회</h2><h2 id="ex3-3-테이블의-160번-사원의-보너스-금액-7-5로-신규-입력"><a href="#ex3-3-테이블의-160번-사원의-보너스-금액-7-5로-신규-입력" class="headerlink" title="ex3_3 테이블의 160번 사원의 보너스 금액 7.5로 신규 입력"></a>ex3_3 테이블의 160번 사원의 보너스 금액 7.5로 신규 입력</h2><p>SELECT*FROM ex3_3;</p>
<h2 id="서브퀴리-개념-메인-퀄리-안에-추가된-쿼리"><a href="#서브퀴리-개념-메인-퀄리-안에-추가된-쿼리" class="headerlink" title="서브퀴리 개념 : 메인 퀄리 안에 추가된 쿼리"></a>서브퀴리 개념 : 메인 퀄리 안에 추가된 쿼리</h2><h2 id="UPDATE-amp-INSERT-구문"><a href="#UPDATE-amp-INSERT-구문" class="headerlink" title="UPDATE &amp; INSERT 구문"></a>UPDATE &amp; INSERT 구문</h2><h2 id="두개의-데이터를-병합"><a href="#두개의-데이터를-병합" class="headerlink" title="두개의 데이터를 병합"></a>두개의 데이터를 병합</h2><p>MERGE INTO ex3_3 d<br>    USING (SELECT employee_id, salary, manager_id<br>                  FROM employees<br>                  WHERE manager_id &#x3D; 146) b<br>    ON (d.employee_id &#x3D; b.employee_id)<br>WHEN MATCHED THEN<br>    UPDATE SET d.bonus_amt &#x3D; d.bonus_amt + b.salary * 0.01<br>    ## DELETE WHERE(b.employee_id &#x3D; 161) 데이터를 제거해줌<br>WHEN NOT MATCHED THEN<br>    INSERT (d.employee_id, d.bonus_amt) VALUES (b.employee_id, b.salary * .001)<br>    WHERE (b.salary &lt; 8000);</p>
<p>SELECT * FROM ex3_3 ORDER BY employee_id;</p>
<h2 id="p-106"><a href="#p-106" class="headerlink" title="p.106"></a>p.106</h2><h2 id="테이블-삭제"><a href="#테이블-삭제" class="headerlink" title="테이블 삭제"></a>테이블 삭제</h2><p>DELETE ex3_3;<br>SELECT*FROM ex3_3 ORDER BY employee_id;</p>
<h2 id="p-107"><a href="#p-107" class="headerlink" title="p.107"></a>p.107</h2><h2 id="commit-amp-rollback-개발자들에게-가장-중요하다"><a href="#commit-amp-rollback-개발자들에게-가장-중요하다" class="headerlink" title="commit &amp; rollback : 개발자들에게 가장 중요하다!"></a>commit &amp; rollback : 개발자들에게 가장 중요하다!</h2><h2 id="commit-변경한-데이터를-데이터베이스에-마지막으로-반영"><a href="#commit-변경한-데이터를-데이터베이스에-마지막으로-반영" class="headerlink" title="commit : 변경한 데이터를 데이터베이스에 마지막으로 반영"></a>commit : 변경한 데이터를 데이터베이스에 마지막으로 반영</h2><h2 id="rollback-변경한-데이터를-변경하기-이전-상태로-돌림"><a href="#rollback-변경한-데이터를-변경하기-이전-상태로-돌림" class="headerlink" title="rollback : 변경한 데이터를 변경하기 이전 상태로 돌림"></a>rollback : 변경한 데이터를 변경하기 이전 상태로 돌림</h2><p>CREATE TABLE ex3_4(<br>    employee_id NUMBER<br>);</p>
<p>INSERT INTO ex3_4 VALUES(100);</p>
<p>commit;</p>
<h2 id="P-109"><a href="#P-109" class="headerlink" title="P.109"></a>P.109</h2><p>TRUNCATE TABLE ex3_4</p>
<h2 id="p-110"><a href="#p-110" class="headerlink" title="p.110"></a>p.110</h2><p>SELECT<br>    ROWNUM, employee_id<br>FROM employees<br>WHERE ROWNUM &lt;5;</p>
<h2 id="ROWID-주소값"><a href="#ROWID-주소값" class="headerlink" title="ROWID, 주소값"></a>ROWID, 주소값</h2><h2 id="DBA-DB모델링-쿼리속도-측정-특성"><a href="#DBA-DB모델링-쿼리속도-측정-특성" class="headerlink" title="DBA, DB모델링 (쿼리속도 측정, 특성)"></a>DBA, DB모델링 (쿼리속도 측정, 특성)</h2><p>SELECT<br>    ROWNUM<br>    , employee_id<br>    , ROWID<br>FROM employees<br>WHERE ROWNUM&lt;5;</p>
<h2 id="연산자"><a href="#연산자" class="headerlink" title="연산자"></a>연산자</h2><h2 id="operator-연산-수행"><a href="#operator-연산-수행" class="headerlink" title="operator 연산 수행"></a>operator 연산 수행</h2><h2 id="수식-연산자-amp-문자-연산자"><a href="#수식-연산자-amp-문자-연산자" class="headerlink" title="수식 연산자 &amp; 문자 연산자"></a>수식 연산자 &amp; 문자 연산자</h2><h2 id="두-문자를-붙이는-연산자"><a href="#두-문자를-붙이는-연산자" class="headerlink" title="|| 두 문자를 붙이는 연산자"></a>|| 두 문자를 붙이는 연산자</h2><p>SELECT<br>    employee_id||’-‘||emp_name AS employee_info<br>FROM employees<br>WHERE ROWNUM &lt; 5;</p>
<h2 id="표현식"><a href="#표현식" class="headerlink" title="표현식"></a>표현식</h2><h2 id="조건문-IF-조건문-PL-x2F-SQL"><a href="#조건문-IF-조건문-PL-x2F-SQL" class="headerlink" title="조건문, IF 조건문 (PL&#x2F;SQL)"></a>조건문, IF 조건문 (PL&#x2F;SQL)</h2><h2 id="CASE-표현식"><a href="#CASE-표현식" class="headerlink" title="CASE 표현식"></a>CASE 표현식</h2><p>SELECT<br>    employee_id<br>    , salary<br>    , CASE WHEN salary &lt;&#x3D; 5000 THEN ‘C등급’<br>        WHEN salary &gt;5000 AND salary &lt;&#x3D;15000 THEN ‘B등급’<br>        ELSE ‘A등급’<br>     END AS salary_grade<br>FROM employees;</p>
<h2 id="조건식"><a href="#조건식" class="headerlink" title="조건식"></a>조건식</h2><h2 id="TRUE-FALSE-UNKNOWN-세가지-타입으로-반환"><a href="#TRUE-FALSE-UNKNOWN-세가지-타입으로-반환" class="headerlink" title="TRUE, FALSE, UNKNOWN 세가지 타입으로 반환"></a>TRUE, FALSE, UNKNOWN 세가지 타입으로 반환</h2><h2 id="비교-조건식"><a href="#비교-조건식" class="headerlink" title="비교 조건식"></a>비교 조건식</h2><h2 id="분석-DB-데이터-추출시-서브쿼리-사용"><a href="#분석-DB-데이터-추출시-서브쿼리-사용" class="headerlink" title="분석, DB 데이터 추출시, 서브쿼리 사용\"></a>분석, DB 데이터 추출시, 서브쿼리 사용\</h2><p>SELECT<br>    employee_id<br>    , salary<br>FROM employees<br>WHERE salary &#x3D; ANY(2000,3000,4000)<br>ORDER BY employee_id;</p>
<h2 id="ANY-gt-OR-연산자-변환"><a href="#ANY-gt-OR-연산자-변환" class="headerlink" title="ANY ##&gt; OR 연산자 변환"></a>ANY ##&gt; OR 연산자 변환</h2><p>SELECT<br>    employee_id<br>    , salary<br>FROM employees<br>WHERE salary &#x3D; 2000 OR salary &#x3D; 3000 OR salary &#x3D; 4000<br>ORDER BY employee_id; ## 너무 길어서 데이터를 가공하기 어려움</p>
<h2 id="ALL"><a href="#ALL" class="headerlink" title="ALL"></a>ALL</h2><p>SELECT<br>    employee_id<br>    , salary<br>FROM employees<br>WHERE salary &#x3D; All(2000,3000,4000)<br>ORDER BY employee_id;</p>
<h2 id="SOME"><a href="#SOME" class="headerlink" title="SOME"></a>SOME</h2><p>SELECT<br>    employee_id<br>    , salary<br>FROM employees<br>WHERE salary &#x3D; SOME(2000,3000,4000)<br>ORDER BY employee_id;</p>
<h2 id="NOT-조건식"><a href="#NOT-조건식" class="headerlink" title="NOT 조건식"></a>NOT 조건식</h2><p>SELECT<br>    employee_id<br>    , salary<br>FROM employees<br>WHERE NOT(salary &gt;&#x3D;2500)<br>ORDER BY employee_id;</p>
<h2 id="NULL-조건식"><a href="#NULL-조건식" class="headerlink" title="NULL 조건식"></a>NULL 조건식</h2><h2 id="IN-조건식"><a href="#IN-조건식" class="headerlink" title="IN 조건식"></a>IN 조건식</h2><h2 id="조건절에-명시한-값이-포함된-건을-반환하는데-앞에서-배웠던-ANT"><a href="#조건절에-명시한-값이-포함된-건을-반환하는데-앞에서-배웠던-ANT" class="headerlink" title="조건절에 명시한 값이 포함된 건을 반환하는데 앞에서 배웠던 ANT"></a>조건절에 명시한 값이 포함된 건을 반환하는데 앞에서 배웠던 ANT</h2><p>SELECT<br> employee_id<br> , salary<br>FROM employees<br>WHERE salary IN(2000,3000,4000)<br>ORDER BY employee_id;</p>
<p>SELECT<br> employee_id<br> , salary<br>FROM employees<br>WHERE salary NOT IN(2000,3000,4000)<br>ORDER BY employee_id;</p>
<h2 id="EXIST-조건식"><a href="#EXIST-조건식" class="headerlink" title="EXIST 조건식"></a>EXIST 조건식</h2><h2 id="서브쿼리만-올-수-있음"><a href="#서브쿼리만-올-수-있음" class="headerlink" title="서브쿼리만 올 수 있음"></a>서브쿼리만 올 수 있음</h2><h2 id="네카라쿠배토당야"><a href="#네카라쿠배토당야" class="headerlink" title="네카라쿠배토당야"></a>네카라쿠배토당야</h2><h2 id="개발자들-코딩테스트-진행-알고리즘-x2F-기술면접-x2F-임원면접"><a href="#개발자들-코딩테스트-진행-알고리즘-x2F-기술면접-x2F-임원면접" class="headerlink" title="개발자들 코딩테스트 진행(알고리즘)&#x2F;기술면접&#x2F;임원면접"></a>개발자들 코딩테스트 진행(알고리즘)&#x2F;기술면접&#x2F;임원면접</h2><h2 id="분석가들-sql-x2F-분석과제-x2F"><a href="#분석가들-sql-x2F-분석과제-x2F" class="headerlink" title="분석가들,sql&#x2F; 분석과제&#x2F;"></a>분석가들,sql&#x2F; 분석과제&#x2F;</h2><h2 id="LIKE-조건"><a href="#LIKE-조건" class="headerlink" title="LIKE 조건"></a>LIKE 조건</h2><h2 id="문자열을-패턴으로-검색해서-사용하는-조건식"><a href="#문자열을-패턴으로-검색해서-사용하는-조건식" class="headerlink" title="문자열을 패턴으로 검색해서 사용하는 조건식"></a>문자열을 패턴으로 검색해서 사용하는 조건식</h2><p>SELECT<br>    emp_name<br>FROM employees<br>WHERE emp_name LIKE ‘%<strong>A</strong>%’<br>ORDER BY emp_name;</p>
<p>SELECT<br>    emp_name<br>FROM employees<br>WHERE emp_name LIKE ‘Al%’<br>ORDER BY emp_name;</p>
<h2 id="4장-숫자-함수"><a href="#4장-숫자-함수" class="headerlink" title="4장 숫자 함수"></a>4장 숫자 함수</h2><h2 id="P-126"><a href="#P-126" class="headerlink" title="P.126"></a>P.126</h2><p>SELECT ABS(10), ABS(-10), ABS(-10.123)<br>FROM DUAL;</p>
<h2 id="정수-반환"><a href="#정수-반환" class="headerlink" title="정수 반환"></a>정수 반환</h2><h2 id="올림"><a href="#올림" class="headerlink" title="올림"></a>올림</h2><p>SELECT CEIL(10.123),CEIL(10.541), CEIL (11.001)<br>FROM DUAL</p>
<h2 id="내림"><a href="#내림" class="headerlink" title="내림"></a>내림</h2><p>SELECT FLOOR(10.123),FLOOR(10.541), FLOOR (11.001)<br>FROM DUAL</p>
<h2 id="반올림"><a href="#반올림" class="headerlink" title="반올림"></a>반올림</h2><p>SELECT ROUND(10.123,2),ROUND(10.541,2), ROUND (11.001,2)<br>FROM DUAL</p>
<h2 id="TRUNC"><a href="#TRUNC" class="headerlink" title="TRUNC"></a>TRUNC</h2><h2 id="반올림-안함-소수점-질삭-자리수-지정-가능"><a href="#반올림-안함-소수점-질삭-자리수-지정-가능" class="headerlink" title="반올림 안함. 소수점 질삭. 자리수 지정 가능"></a>반올림 안함. 소수점 질삭. 자리수 지정 가능</h2><p>SELECT TRUNC(115.155),TRUNC(115.155,1),TRUNC(115.155,2),TRUNC(115.155,-2)<br>    FROM DUAL;</p>
<h2 id="POWER"><a href="#POWER" class="headerlink" title="POWER"></a>POWER</h2><h2 id="POWER-함수-SQRT"><a href="#POWER-함수-SQRT" class="headerlink" title="POWER 함수, SQRT"></a>POWER 함수, SQRT</h2><p>SELECT POWER(3,2), POWER(3,3), POWER(3,3.001)<br>FROM DUAL;</p>
<h2 id="제곱근"><a href="#제곱근" class="headerlink" title="제곱근"></a>제곱근</h2><p>SELECT SQRT(2), SQRT(5), SQRT(9)<br>FROM DUAL;</p>
<h2 id="과거-SQL-DB-에서-자료를-조회하는-용"><a href="#과거-SQL-DB-에서-자료를-조회하는-용" class="headerlink" title="과거 : SQL,DB 에서 자료를 조회하는 용"></a>과거 : SQL,DB 에서 자료를 조회하는 용</h2><h2 id="현재-SQL-gt-수학-amp-통계-도구처럼-진화"><a href="#현재-SQL-gt-수학-amp-통계-도구처럼-진화" class="headerlink" title="현재 : SQL ##&gt; 수학&amp; 통계 도구처럼 진화"></a>현재 : SQL ##&gt; 수학&amp; 통계 도구처럼 진화</h2><h2 id="오라클-19C"><a href="#오라클-19C" class="headerlink" title="오라클 19C\"></a>오라클 19C\</h2><h2 id="함수를-나눈-나머지-값-반환"><a href="#함수를-나눈-나머지-값-반환" class="headerlink" title="함수를 나눈 나머지 값 반환"></a>함수를 나눈 나머지 값 반환</h2><p>SELECT MOD(19,4),MOD(19.123,4.2)<br>    FROM DUAL;</p>
<h2 id="문자열-데이터-전처리"><a href="#문자열-데이터-전처리" class="headerlink" title="문자열 데이터 전처리"></a>문자열 데이터 전처리</h2><h2 id="게임사"><a href="#게임사" class="headerlink" title="게임사"></a>게임사</h2><h2 id="채팅-gt-문자-데이터"><a href="#채팅-gt-문자-데이터" class="headerlink" title="채팅 ##&gt; 문자 데이터"></a>채팅 ##&gt; 문자 데이터</h2><h2 id="텍스트-마이팅-빈도-워드클라우드"><a href="#텍스트-마이팅-빈도-워드클라우드" class="headerlink" title="텍스트 마이팅 (빈도, 워드클라우드)"></a>텍스트 마이팅 (빈도, 워드클라우드)</h2><h2 id="100GB-x2F-RAM-32GB-64GB"><a href="#100GB-x2F-RAM-32GB-64GB" class="headerlink" title="100GB &#x2F; RAM 32GB, 64GB"></a>100GB &#x2F; RAM 32GB, 64GB</h2><p>SELECT INITCAP(‘never say goodbye’), INITCAP(‘never6say*good가bye’)<br>FROM DUAL;</p>
<h2 id="LOWER-함수"><a href="#LOWER-함수" class="headerlink" title="LOWER 함수"></a>LOWER 함수</h2><h2 id="메가변수로-돌아오는-문자를-모두-소문자로-UPPDER-함수는-대문자로-반환"><a href="#메가변수로-돌아오는-문자를-모두-소문자로-UPPDER-함수는-대문자로-반환" class="headerlink" title="메가변수로 돌아오는 문자를 모두 소문자로 UPPDER 함수는 대문자로 반환"></a>메가변수로 돌아오는 문자를 모두 소문자로 UPPDER 함수는 대문자로 반환</h2><p>SELECT LOWER(‘NEVER SAY GOODBYE’), UPPER(‘never say goodbye’)<br>FROM DUAL;</p>
<h2 id="CONCAT-연산자와-비슷"><a href="#CONCAT-연산자와-비슷" class="headerlink" title="CONCAT || 연산자와 비슷"></a>CONCAT || 연산자와 비슷</h2><p>SELECT CONCAT(‘I Have’, ‘A Dream’),’I Have’||’A Dream’<br>FROM DUAL;</p>
<h2 id="SUBSTR"><a href="#SUBSTR" class="headerlink" title="SUBSTR"></a>SUBSTR</h2><h2 id="문자열-가르기"><a href="#문자열-가르기" class="headerlink" title="문자열 가르기"></a>문자열 가르기</h2><p>SELECT SUBSTR(‘ABCDEFG’,1,4), SUBSTR(‘ABCDEFG’,-1,4)<br>FROM DUAL;</p>
<h2 id="글자를-1개당-3bYTE-씩-인식-교재는-2Byte씩-인식"><a href="#글자를-1개당-3bYTE-씩-인식-교재는-2Byte씩-인식" class="headerlink" title="글자를 1개당 3bYTE 씩 인식 (교재는 2Byte씩 인식)"></a>글자를 1개당 3bYTE 씩 인식 (교재는 2Byte씩 인식)</h2><p>SELECT SUBSTRB(‘ABCDEFG’,1,4), SUBSTRB(‘가나다라마바사’,1,4)<br>FROM DUAL;</p>
<p>##ltrim, rtrim<br>SELECT<br>    LTRIM(‘ABCDEFGABC’,’ABC’)<br>    ,RTRIM(‘ABCDEFGABC’,’ABC’)<br>FROM DUAL;</p>
<h2 id="LPAD-RPAD"><a href="#LPAD-RPAD" class="headerlink" title="LPAD, RPAD"></a>LPAD, RPAD</h2><h2 id="날짜-함수-P-138"><a href="#날짜-함수-P-138" class="headerlink" title="날짜 함수(P.138)"></a>날짜 함수(P.138)</h2><p>SELECT SYSDATE, SYSTIMESTAMP FROM DUAL;</p>
<h2 id="ADD-MONTHS"><a href="#ADD-MONTHS" class="headerlink" title="ADD_MONTHS"></a>ADD_MONTHS</h2><h2 id="ADD-MONTHS-함수-매개변수로-들어온-날짜-integer-만큼-월을-더함"><a href="#ADD-MONTHS-함수-매개변수로-들어온-날짜-integer-만큼-월을-더함" class="headerlink" title="ADD_MONTHS 함수, 매개변수로 들어온 날짜, integer 만큼 월을 더함"></a>ADD_MONTHS 함수, 매개변수로 들어온 날짜, integer 만큼 월을 더함</h2><p>SELECT ADD_MONTHS(SYSDATE,1)FROM DUAL;</p>
<p>SELECT MONTHS_BETWEEN(SYSDATE,ADD_MONTHS(SYSDATE,1))mon1<br>FROM DUAL;</p>
<h2 id="LAST-DATE-해당월의-마지막-일자"><a href="#LAST-DATE-해당월의-마지막-일자" class="headerlink" title="LAST_DATE : 해당월의 마지막 일자"></a>LAST_DATE : 해당월의 마지막 일자</h2><p>SELECT LAST_DAY(SYSDATE)FROM DUAL;</p>
<h2 id="ROUND-TRUNC-에-날짜를-넣으면-반올림한-날짜-잘라낸-날짜를-반환"><a href="#ROUND-TRUNC-에-날짜를-넣으면-반올림한-날짜-잘라낸-날짜를-반환" class="headerlink" title="ROUND, TRUNC 에 날짜를 넣으면 반올림한 날짜, 잘라낸 날짜를 반환"></a>ROUND, TRUNC 에 날짜를 넣으면 반올림한 날짜, 잘라낸 날짜를 반환</h2><h2 id="NEXT-DAY"><a href="#NEXT-DAY" class="headerlink" title="NEXT_DAY"></a>NEXT_DAY</h2><p>SELECT NEXT_DAY(SYSDATE,’금요일’)<br>FROM DUAL;</p>
<h2 id="P-141-변환함수"><a href="#P-141-변환함수" class="headerlink" title="P.141 변환함수"></a>P.141 변환함수</h2><h2 id="TO-CHAR-숫자-혹은-날씨-FORMAT"><a href="#TO-CHAR-숫자-혹은-날씨-FORMAT" class="headerlink" title="TO_CHAR(숫자 혹은 날씨, FORMAT)"></a>TO_CHAR(숫자 혹은 날씨, FORMAT)</h2><p>SELECT TO_CHAR(123456789, ‘999,999,999’)<br>FROM DUAL;</p>
<p>SELECT TO_CHAR(SYSDATE,’D’)FROM DUAL;</p>
<h2 id="문자를-숫자로-변환"><a href="#문자를-숫자로-변환" class="headerlink" title="문자를 숫자로 변환"></a>문자를 숫자로 변환</h2><p>SELECT TO_NUMBER(‘123456’)<br>FROM DUAL;</p>
<h2 id="NULL-관련-함수-중요"><a href="#NULL-관련-함수-중요" class="headerlink" title="NULL 관련 함수 중요!!!!!!!"></a>NULL 관련 함수 중요!!!!!!!</h2><p>SELECT manager_id, employee_id FROM employees;</p>
<h2 id="NVL-표현식-1이-NULL일때-표현식-2를-반환함"><a href="#NVL-표현식-1이-NULL일때-표현식-2를-반환함" class="headerlink" title="NVL: 표현식 1이 NULL일때, 표현식 2를 반환함."></a>NVL: 표현식 1이 NULL일때, 표현식 2를 반환함.</h2><p>SELECT NVL(manager_id, employee_id)<br>FROM employees<br>WHERE manager_id IS NULL;</p>
<h2 id="NVL2-표현식-1이-NULL이-아니면-표현식-2-출력"><a href="#NVL2-표현식-1이-NULL이-아니면-표현식-2-출력" class="headerlink" title="NVL2 표현식 1이 NULL이 아니면 표현식 2 출력"></a>NVL2 표현식 1이 NULL이 아니면 표현식 2 출력</h2><h2 id="표현식-2가-NULL이면-표현식-3을-출력"><a href="#표현식-2가-NULL이면-표현식-3을-출력" class="headerlink" title="표현식 2가 NULL이면 표현식 3을 출력"></a>표현식 2가 NULL이면 표현식 3을 출력</h2><p>SELECT employee_id,commission_pct,salary FROM employees;</p>
<p>SELECT employee_id<br>                , salary<br>                , commission_pct<br>                , NVL2(commission_pct, salary + (salary * commission_pct), salary) AS salary2<br>FROM employees<br>WHERE employee_id IN (118, 179);</p>
<h2 id="COALESCE-expr1-expr2"><a href="#COALESCE-expr1-expr2" class="headerlink" title="COALESCE(expr1,expr2)"></a>COALESCE(expr1,expr2)</h2><h2 id="매개변수로-들어오는-표현식에서-null이-아닌-첫번째-표현식-반환"><a href="#매개변수로-들어오는-표현식에서-null이-아닌-첫번째-표현식-반환" class="headerlink" title="매개변수로 들어오는 표현식에서 null이 아닌 첫번째 표현식 반환"></a>매개변수로 들어오는 표현식에서 null이 아닌 첫번째 표현식 반환</h2><p>SELECT<br>    employee_id<br>    ,salary<br>    ,commission_pct<br>    ,COALESCE(salary * commission_pct, salary) as salary2<br>FROM employees;</p>
<h2 id="DECODE"><a href="#DECODE" class="headerlink" title="DECODE"></a>DECODE</h2><h2 id="IF-ELIF-ELIF-ELIF-ELSE"><a href="#IF-ELIF-ELIF-ELIF-ELSE" class="headerlink" title="IF-ELIF-ELIF-ELIF-ELSE"></a>IF-ELIF-ELIF-ELIF-ELSE</h2><p>SELECT * FROM sales;</p>
<p>SELECT prod_id<br>    ,DECODE(channel_id, 3, ‘Direct’,<br>                        9, ‘Direct’,<br>                        5, ‘Indirect’,<br>                        4, ‘Indirect’,<br>                           ‘Other’) decodes<br>FROM sales<br>WHERE rownum&lt;10;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/20/0720_oracler_sql%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%95/" data-id="cl5taopo50000l0tve380cujk" data-title="0720_oracle_sql 기초문법" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-0719_oracle입문" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/19/0719_oracle%EC%9E%85%EB%AC%B8/" class="article-date">
  <time class="dt-published" datetime="2022-07-19T00:00:00.000Z" itemprop="datePublished">2022-07-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/19/0719_oracle%EC%9E%85%EB%AC%B8/">0719_oracle입문</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>SELECT table_name FROM user_tables;</p>
<h2 id="sql-vs-pl-x2F-sql"><a href="#sql-vs-pl-x2F-sql" class="headerlink" title="sql vs pl&#x2F;sql"></a>sql vs pl&#x2F;sql</h2><h2 id="sql-분석가-개발자"><a href="#sql-분석가-개발자" class="headerlink" title="sql (분석가, 개발자)"></a>sql (분석가, 개발자)</h2><h4 id="프로그래밍-성격이-얕음"><a href="#프로그래밍-성격이-얕음" class="headerlink" title="프로그래밍 성격이 얕음"></a>프로그래밍 성격이 얕음</h4><h2 id="pl-x2F-sql-분석가-개발자-dba"><a href="#pl-x2F-sql-분석가-개발자-dba" class="headerlink" title="pl&#x2F;sql (분석가, 개발자, dba)"></a>pl&#x2F;sql (분석가, 개발자, dba)</h2><h2 id="입문-sql-테이블-뷰-gt-pl-x2F-sql-함수-프로시저"><a href="#입문-sql-테이블-뷰-gt-pl-x2F-sql-함수-프로시저" class="headerlink" title="입문 : sql 테이블, 뷰 -&gt; pl&#x2F;sql 함수, 프로시저"></a>입문 : sql 테이블, 뷰 -&gt; pl&#x2F;sql 함수, 프로시저</h2><h2 id="테이블-생성"><a href="#테이블-생성" class="headerlink" title="테이블 생성"></a>테이블 생성</h2><p>&#x2F;*<br>CREATE TABLE 테이블명(<br>    컬럼 1 컬럼 1_데이터 타입 결측치 허용 유무,</p>
<p>)<br>*&#x2F;</p>
<h2 id="테이블생성-예시"><a href="#테이블생성-예시" class="headerlink" title="테이블생성 예시"></a>테이블생성 예시</h2><p>CREATE TABLE ex2_1(<br>    COLUMN1     CHAR(10),<br>    COLUMN2     VARCHAR2(10),<br>    COLUMN3     VARCHAR2(10),<br>    COLUMN4     NUMBER<br>);</p>
<h2 id="데이터-추가-웹-개발-시-아이디-추가할때-필요한-코드"><a href="#데이터-추가-웹-개발-시-아이디-추가할때-필요한-코드" class="headerlink" title="데이터 추가 (웹 개발 시 아이디 추가할때 필요한 코드)"></a>데이터 추가 (웹 개발 시 아이디 추가할때 필요한 코드)</h2><p>INSERT INTO ex2_1 (column1, column2) VALUES (‘abc’, ‘abc’);</p>
<h2 id="데이터-조회"><a href="#데이터-조회" class="headerlink" title="데이터 조회"></a>데이터 조회</h2><p>SELECT column1, LENGTH(column1) as len1<br>FROM ex2_1;</p>
<p>##p.53</p>
<h2 id="영어에서-한문자-1byte"><a href="#영어에서-한문자-1byte" class="headerlink" title="영어에서 한문자 1byte"></a>영어에서 한문자 1byte</h2><h2 id="한글에서는-한문자-2byte-삼십글자가-들어올경우-30-2-x3D-60으로-해서-데이터-생성해야함"><a href="#한글에서는-한문자-2byte-삼십글자가-들어올경우-30-2-x3D-60으로-해서-데이터-생성해야함" class="headerlink" title="한글에서는 한문자 2byte(삼십글자가 들어올경우 30*2&#x3D;60으로 해서 데이터 생성해야함)"></a>한글에서는 한문자 2byte(삼십글자가 들어올경우 30*2&#x3D;60으로 해서 데이터 생성해야함)</h2><p>CREATE TABLE ex2_2(<br>    COLUMN1     VARCHAR2(3), ## 디폴트 값이 byte 적용<br>    COLUMN2     VARCHAR2(3 byte),<br>    COLUMN3     VARCHAR2(3 char)<br>);</p>
<h2 id="기존의-객체가-이름을-사용하고-있다는-오류가-뜨면-새로고침을-실행해야함"><a href="#기존의-객체가-이름을-사용하고-있다는-오류가-뜨면-새로고침을-실행해야함" class="headerlink" title="기존의 객체가 이름을 사용하고 있다는 오류가 뜨면 새로고침을 실행해야함."></a>기존의 객체가 이름을 사용하고 있다는 오류가 뜨면 새로고침을 실행해야함.</h2><p>INSERT INTO ex2_2 VALUES(‘abc’, ‘abc’, ‘abc’);</p>
<p>SELECT column1<br>        , LENGTH(column1) as len1<br>        , column2<br>        , LENGTH(column2) as len2<br>        , column3<br>        , LENGTH(column3) as len3<br>    FROM ex2_2;</p>
<h2 id="한글-추가"><a href="#한글-추가" class="headerlink" title="한글 추가"></a>한글 추가</h2><p>INSERT INTO ex2_2 VALUES(‘홍길동’, ‘홍길동’, ‘홍길동’);##입력 불가</p>
<h2 id="p-54"><a href="#p-54" class="headerlink" title="p.54"></a>p.54</h2><p>INSERT INTO ex2_2 (column3) values(‘홍길동’);</p>
<p>SELECT column3<br>        , LENGTH(column3) AS len3<br>        , LENGTHB(column3) AS bytelen<br>FROM ex2_2;</p>
<h2 id="숫자-데이터-타입"><a href="#숫자-데이터-타입" class="headerlink" title="숫자 데이터 타입"></a>숫자 데이터 타입</h2><p>CREATE TABLE ex2_3(<br>    COL_INT INTEGER,<br>    COL_DEC DECIMAL,<br>    COL_NUM NUMBER<br>);</p>
<p>SELECT column_id<br>    , column_name<br>    , data_type<br>    , data_length<br>FROM user_tab_cols<br>WHERE table_name &#x3D; ‘EX2_3’<br>ORDER BY column_id;</p>
<h2 id="select-컬럼명"><a href="#select-컬럼명" class="headerlink" title="select 컬럼명"></a>select 컬럼명</h2><h2 id="from-테이블명"><a href="#from-테이블명" class="headerlink" title="from 테이블명"></a>from 테이블명</h2><h2 id="where-조건식-위치정보"><a href="#where-조건식-위치정보" class="headerlink" title="where 조건식(위치정보)"></a>where 조건식(위치정보)</h2><h2 id="order-by-정렬"><a href="#order-by-정렬" class="headerlink" title="order by 정렬"></a>order by 정렬</h2><h2 id="모든-컬럼을-가지고-온다"><a href="#모든-컬럼을-가지고-온다" class="headerlink" title="* 모든 컬럼을 가지고 온다"></a>* 모든 컬럼을 가지고 온다</h2><h2 id="날짜-데이터-타입"><a href="#날짜-데이터-타입" class="headerlink" title="날짜 데이터 타입"></a>날짜 데이터 타입</h2><p>CREATE TABLE ex2_5(<br>    COL_DATE        DATE,<br>    COL_TIMESTAMP   TIMESTAMP<br>);</p>
<p>INSERT INTO ex2_5 VALUES(SYSDATE, SYSTIMESTAMP);<br>SELECT * FROM ex2_5;</p>
<h2 id="null-값이-없음"><a href="#null-값이-없음" class="headerlink" title="null : 값이 없음"></a>null : 값이 없음</h2><h2 id="해당-컬럼은-null"><a href="#해당-컬럼은-null" class="headerlink" title="해당 컬럼은 null"></a>해당 컬럼은 null</h2><h2 id="결측치-허용-x-not-null"><a href="#결측치-허용-x-not-null" class="headerlink" title="결측치 허용 x : not null"></a>결측치 허용 x : not null</h2><p>##p.60</p>
<p>CREATE TABLE ex2_6(<br>        COL_NULL        VARCHAR2(10),##결측치 허용<br>        COL_NOT_NULL    VARCHAR2(10) NOT NULL ## 결측치 허용 X<br>);</p>
<p>INSERT INTO ex2_6 VALUES (‘AA’,’’); ##  에러 발생<br>INSERT INTO ex2_6 VALUES(‘’,’BB’);## 정상적으로 삽입됨<br>SELECT *FROM ex2_6</p>
<p>INSERT INTO ex2_6 VALUES(‘AA’,’BB’);<br>SELECT*FROM ex2_6</p>
<h2 id="테이블-생성-추가-삭제-수정-코드"><a href="#테이블-생성-추가-삭제-수정-코드" class="headerlink" title="테이블 생성, 추가, 삭제, 수정 코드"></a>테이블 생성, 추가, 삭제, 수정 코드</h2><h2 id="파이썬-자바에서-다-사용될-코드들"><a href="#파이썬-자바에서-다-사용될-코드들" class="headerlink" title="파이썬, 자바에서 다 사용될 코드들"></a>파이썬, 자바에서 다 사용될 코드들</h2><p>SELECT constraint_name<br>        , constraint_type<br>        , table_name<br>        , search_condition<br>FROM user_constraints<br>WHERE table_name &#x3D; ‘EX2_6’;</p>
<h2 id="UNIQUE"><a href="#UNIQUE" class="headerlink" title="UNIQUE"></a>UNIQUE</h2><h2 id="중복-값-허용"><a href="#중복-값-허용" class="headerlink" title="중복 값 허용"></a>중복 값 허용</h2><p>CREATE TABLE ex2_7(<br>    COL_UNIQUE_NULL     VARCHAR2(10)UNIQUE<br>    , COL_UNIQUE_NNULL  VARCHAR2(10) UNIQUE NOT NULL<br>    , COL_UNIQUE        VARCHAR2(10)<br>    , CONSTRAINTS unique_nml UNIQUE (COL_UNIQUE)## CONSTRAINT 제약을 걸다<br>);</p>
<p>SELECT constraint_name<br>        , constraint_type<br>        , table_name<br>        , search_condition<br>FROM user_constraints<br>WHERE table_name &#x3D; ‘EX2_7’;</p>
<h2 id="DROP-TABLE-테이블-명-테이블-삭제하는법"><a href="#DROP-TABLE-테이블-명-테이블-삭제하는법" class="headerlink" title="DROP TABLE 테이블 명 ;  테이블 삭제하는법"></a>DROP TABLE 테이블 명 ;  테이블 삭제하는법</h2><p>INSERT INTO ex2_7 VALUES(‘AA’,’AA’,’AA’);<br>INSERT INTO ex2_7 VALUES(‘’,’BB’,’CC’); </p>
<h2 id="기본키-중요"><a href="#기본키-중요" class="headerlink" title="기본키 중요"></a>기본키 중요</h2><h2 id="Primary-Key"><a href="#Primary-Key" class="headerlink" title="Primary Key"></a>Primary Key</h2><h2 id="unique-중복허용-안됨-not-null-결측치허용-안됨"><a href="#unique-중복허용-안됨-not-null-결측치허용-안됨" class="headerlink" title="unique(중복허용 안됨), not null(결측치허용 안됨)"></a>unique(중복허용 안됨), not null(결측치허용 안됨)</h2><h2 id="테이블-당-1개의-기본키만-설정-가능"><a href="#테이블-당-1개의-기본키만-설정-가능" class="headerlink" title="테이블 당 1개의 기본키만 설정 가능"></a>테이블 당 1개의 기본키만 설정 가능</h2><p>CREATE TABLE ex2_8(<br>    COL1 VARCHAR2(10) PRIMARY KEY<br>    , COL2 VARCHAR2(10)<br>);</p>
<h2 id="INSERT-INTO-ex2-8-VALUES-‘’-’AA’-삽입-불가"><a href="#INSERT-INTO-ex2-8-VALUES-‘’-’AA’-삽입-불가" class="headerlink" title="INSERT INTO ex2_8 VALUES(‘’,’AA’); - 삽입 불가"></a>INSERT INTO ex2_8 VALUES(‘’,’AA’); - 삽입 불가</h2><p>INSERT INTO ex2_8 VALUES(‘AA’,’AA’);</p>
<h2 id="외래키-테이블-간의-참조-데이터-무결성을-위한-제약-조건"><a href="#외래키-테이블-간의-참조-데이터-무결성을-위한-제약-조건" class="headerlink" title="외래키 : 테이블 간의 참조 데이터 무결성을 위한 제약 조건"></a>외래키 : 테이블 간의 참조 데이터 무결성을 위한 제약 조건</h2><h2 id="참조-무결성-보장-잘못된-정보가-입력되는-것을-방지"><a href="#참조-무결성-보장-잘못된-정보가-입력되는-것을-방지" class="headerlink" title="참조 무결성 보장 : 잘못된 정보가 입력되는 것을 방지"></a>참조 무결성 보장 : 잘못된 정보가 입력되는 것을 방지</h2><h2 id="CHECK"><a href="#CHECK" class="headerlink" title="CHECK"></a>CHECK</h2><h2 id="컬럼에-입력되는-데이터를-체크해-특정-조건에-맞는-데이터만-입력"><a href="#컬럼에-입력되는-데이터를-체크해-특정-조건에-맞는-데이터만-입력" class="headerlink" title="컬럼에 입력되는 데이터를 체크해 특정 조건에 맞는 데이터만 입력"></a>컬럼에 입력되는 데이터를 체크해 특정 조건에 맞는 데이터만 입력</h2><p>CREATE TABLE ex2_9(<br>    num1        NUMBER<br>    , CONSTRAINTS check1 CHECK (num1 BETWEEN 1 AND 9)<br>    , gender        VARCHAR2(10)<br>    , CONSTRAINTS check2 CHECK (gender IN(‘MALE’,’FEMALE’))<br>);</p>
<p>SELECT constraint_name<br>        , constraint_type<br>        , table_name<br>        , search_condition<br>FROM user_constraints<br>WHERE table_name &#x3D; ‘EX2_9’;</p>
<p>INSERT INTO ex2_9 VALUES(10,’MAN’); ## MALE 이들어가지 않아서 오류가 남<br>INSERT INTO ex2_9 VALUES(5, ‘FEMALE’)</p>
<h2 id="DEFAULT-고정-값-무조건-들어가라-날짜-시간"><a href="#DEFAULT-고정-값-무조건-들어가라-날짜-시간" class="headerlink" title="DEFAULT : 고정 값 무조건 들어가라, 날짜, 시간"></a>DEFAULT : 고정 값 무조건 들어가라, 날짜, 시간</h2><p>alter session set nls_date_format&#x3D;’YYYY&#x2F;MM&#x2F;DD HH24:MI:SS’;</p>
<p>CREATE TABLE ex2_10(<br>    COL1 VARCHAR2(10) NOT NULL<br>    , COL2 VARCHAR2(10) NULL<br>    , CREATE_date DATE DEFAULT SYSDATE<br>);</p>
<p>INSERT INTO ex2_10 (col1,col2) VALUES(‘AA’,’BB’);<br>SELECT*FROM ex2_10;</p>
<h2 id="테이블-변경"><a href="#테이블-변경" class="headerlink" title="테이블 변경"></a>테이블 변경</h2><h2 id="alter-table"><a href="#alter-table" class="headerlink" title="alter table"></a>alter table</h2><p>ALTER TABLE ex2_10 RENAME COLUMN Col1 TO Col11;<br>SELECT *FROM ex2_10;</p>
<p>DESC ex2_10;</p>
<h2 id="컬럼-변경"><a href="#컬럼-변경" class="headerlink" title="컬럼 변경"></a>컬럼 변경</h2><p>ALTER TABLE ex2_10 MODIFY COL2 VARCHAR2(30);</p>
<p>DESC ex2_10;</p>
<h2 id="신규-컬럼-추가"><a href="#신규-컬럼-추가" class="headerlink" title="신규 컬럼 추가"></a>신규 컬럼 추가</h2><p>ALTER TABLE ex2_10 ADD COL3 NUMBER;<br>DESC ex2_10</p>
<h2 id="컬럼-삭제"><a href="#컬럼-삭제" class="headerlink" title="컬럼 삭제"></a>컬럼 삭제</h2><p>ALTER TABLE ex2_10 DROP COLUMN COL3;<br>DESC ex2_10;</p>
<h2 id="제약-조건-추가"><a href="#제약-조건-추가" class="headerlink" title="제약 조건 추가"></a>제약 조건 추가</h2><p>ALTER TABLE ex2_10 ADD CONSTRAINTS pk_ex2_10 PRIMARY KEY (COL11);<br>SELECT constraint_name<br>        , constraint_type<br>        , table_name<br>        , search_condition<br>FROM user_constraints<br>WHERE table_name &#x3D; ‘EX2_10’;</p>
<h2 id="제약-조건-삭제"><a href="#제약-조건-삭제" class="headerlink" title="제약 조건 삭제"></a>제약 조건 삭제</h2><p>ALTER TABLE ex2_10 DROP CONSTRAINTS pk_ex2_10;<br>SELECT constraint_name<br>        , constraint_type<br>        , table_name<br>        , search_condition<br>FROM user_constraints<br>WHERE table_name &#x3D; ‘EX2_10’;</p>
<h2 id="테이블-복사"><a href="#테이블-복사" class="headerlink" title="테이블 복사"></a>테이블 복사</h2><p>CREATE TABLE ex2_9_1 AS<br>SELECT *<br>    FROM ex2_9;</p>
<h2 id="뷰-생성"><a href="#뷰-생성" class="headerlink" title="뷰 생성"></a>뷰 생성</h2><p>CREATE OR REPLACE VIEW emp_dept_vl AS<br>SELECT a.employee_id<br>        , a.emp_name<br>        , a.department_id<br>        , b.department_name<br>FROM employees a<br>    , departments b<br>WHERE a.department_id &#x3D; b.department_id;</p>
<h2 id="뷰-제거"><a href="#뷰-제거" class="headerlink" title="뷰 제거"></a>뷰 제거</h2><p>DROP VIEW emp_dept_vl;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/19/0719_oracle%EC%9E%85%EB%AC%B8/" data-id="cl5rw439b00006wtvh9q6a5rm" data-title="0719_oracle입문" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-0718" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/18/0718/" class="article-date">
  <time class="dt-published" datetime="2022-07-18T00:00:00.000Z" itemprop="datePublished">2022-07-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/18/0718/">0718_mlops 배우기</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd </span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> mlflow </span><br><span class="line"><span class="keyword">import</span> mlflow.sklearn</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, KFold</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> roc_auc_score, plot_roc_curve, confusion_matrix </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;numpy version <span class="subst">&#123;np.__version__&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;pandas version <span class="subst">&#123;pd.__version__&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;matplotlib version <span class="subst">&#123;mpl.__version__&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;seaborn version <span class="subst">&#123;sns.__version__&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;sklearn version <span class="subst">&#123;sklearn.__version__&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;MLFlow version <span class="subst">&#123;mlflow.__version__&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>numpy version 1.23.1
pandas version 1.4.3
matplotlib version 3.5.2
seaborn version 0.11.2
sklearn version 1.1.1
MLFlow version 1.27.0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure>




<pre><code>&#39;C:\\Users\\User\\Desktop\\mlops_sample\\src&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">DATA_PATH = <span class="string">&quot;C:\\Users\\User\\Desktop\\mlops_sample\\data\\&quot;</span></span><br><span class="line"></span><br><span class="line">train_df = pd.read_csv(DATA_PATH + <span class="string">&quot;train.csv&quot;</span>)</span><br><span class="line">test = pd.read_csv(DATA_PATH + <span class="string">&quot;test.csv&quot;</span>)</span><br><span class="line">submission = pd.read_csv(DATA_PATH +<span class="string">&quot;gender_submission.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line">train_df.shape, test.shape, submission.shape</span><br></pre></td></tr></table></figure>




<pre><code>((891, 12), (418, 11), (418, 2))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_df.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 12 columns):
 #   Column       Non-Null Count  Dtype  
---  ------       --------------  -----  
 0   PassengerId  891 non-null    int64  
 1   Survived     891 non-null    int64  
 2   Pclass       891 non-null    int64  
 3   Name         891 non-null    object 
 4   Sex          891 non-null    object 
 5   Age          714 non-null    float64
 6   SibSp        891 non-null    int64  
 7   Parch        891 non-null    int64  
 8   Ticket       891 non-null    object 
 9   Fare         891 non-null    float64
 10  Cabin        204 non-null    object 
 11  Embarked     889 non-null    object 
dtypes: float64(2), int64(5), object(5)
memory usage: 83.7+ KB
</code></pre>
<ul>
<li>age, cabin, emarbked에 대해 결측치 존재함</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_df.isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<pre><code>PassengerId      0
Survived         0
Pclass           0
Name             0
Sex              0
Age            177
SibSp            0
Parch            0
Ticket           0
Fare             0
Cabin          687
Embarked         2
dtype: int64
</code></pre>
<h2 id="데이터-시각화"><a href="#데이터-시각화" class="headerlink" title="데이터 시각화"></a>데이터 시각화</h2><ul>
<li>종속 변수는 survived임</li>
<li>숫자 1은 생존을 의미하고, 0은 사망을 의미</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">survived = train_df[train_df[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">1</span>]</span><br><span class="line">deceased = train_df[train_df[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Survived:<span class="subst">&#123;survived.shape&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Deceased:<span class="subst">&#123;deceased.shape&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Survived:(342, 12)
Deceased:(549, 12)
</code></pre>
<ul>
<li>seaborn</li>
<li>matplot</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class_df = train_df[<span class="string">&#x27;Survived&#x27;</span>].value_counts(sort=<span class="literal">True</span>)</span><br><span class="line">class_df</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.bar(class_df.index,class_df.values, color = <span class="string">&#x27;maroon&#x27;</span>, width = <span class="number">0.4</span>)</span><br><span class="line">ax.set_xticks(<span class="built_in">range</span>(<span class="number">2</span>), [<span class="string">&#x27;Deceased&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>])</span><br><span class="line">ax.set_title(<span class="string">&#x27;Class Distribution&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Counts&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Class Label&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="/images/0718/output_9_0.png" alt="png"></p>
<ul>
<li>연령별 분포를 확인한다.</li>
<li>연령별로 확인 구분이 잘 안됨.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.scatter(train_df[<span class="string">&#x27;Age&#x27;</span>], train_df[<span class="string">&#x27;Survived&#x27;</span>])</span><br><span class="line">ax.set_title(<span class="string">&quot;Age by Survived&quot;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&quot;Class&quot;</span>)</span><br><span class="line">ax.set_yticks(<span class="built_in">range</span>(<span class="number">2</span>), [<span class="string">&quot;Deceased&quot;</span>, <span class="string">&quot;Survived&quot;</span>])</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Survived By Age&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/0718/output_11_0.png" alt="png"></p>
<ul>
<li>사용자 정의함수를 만들어서 활용</li>
<li>seaborn counyplot()   함수 활용</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">column =<span class="string">&#x27;Sex&#x27;</span></span><br><span class="line">train_df[[column, <span class="string">&#x27;Survived&#x27;</span>]].groupby([column]).mean().plot.bar()</span><br></pre></td></tr></table></figure>




<pre><code>&lt;AxesSubplot:xlabel=&#39;Sex&#39;&gt;
</code></pre>
<p><img src="/images/0718/output_13_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">plot_bar</span>(<span class="params">data, column=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> column <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># 시각화 코드 작성</span></span><br><span class="line">        fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">18</span>, <span class="number">8</span>))</span><br><span class="line">        data[[column, <span class="string">&quot;Survived&quot;</span>]].groupby([column]).mean().plot.bar(ax=ax[<span class="number">0</span>])</span><br><span class="line">        sns.countplot(x = column, hue = <span class="string">&quot;Survived&quot;</span>, data = data, ax=ax[<span class="number">1</span>])</span><br><span class="line">        ax[<span class="number">1</span>].legend(labels = [<span class="string">&#x27;Dead&#x27;</span>, <span class="string">&#x27;Survived&#x27;</span>])</span><br><span class="line">        ax[<span class="number">1</span>].set_title(<span class="string">f&#x27;<span class="subst">&#123;column&#125;</span>:Survived vs Dead&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Please Enter Column&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># return No</span></span><br></pre></td></tr></table></figure>

<ul>
<li>여성이 남성보다 상대적으로 많이 생존했다</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">column = <span class="string">&#x27;Sex&#x27;</span></span><br><span class="line">plot_bar(train_df,column)</span><br></pre></td></tr></table></figure>


<p><img src="/images/0718/output_16_0.png" alt="png"></p>
<ul>
<li>pclass 변 생존 유무 막대그래프를 그려본다</li>
<li>1번 클래스에 속할수록 생존확률이 높다</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">column = <span class="string">&quot;Pclass&quot;</span></span><br><span class="line">plot_bar(train_df, column)</span><br></pre></td></tr></table></figure>


<p><img src="/images/0718/output_18_0.png" alt="png"></p>
<h2 id="결측치-대치"><a href="#결측치-대치" class="headerlink" title="결측치 대치"></a>결측치 대치</h2><ul>
<li>컬럼 3개</li>
<li>cabin 컬럼 삭제</li>
<li>embarked 2개뿐, 최빈도로 채워넣기</li>
<li>age 117개</li>
<li>그룹으로 대치</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_df.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 12 columns):
 #   Column       Non-Null Count  Dtype  
---  ------       --------------  -----  
 0   PassengerId  891 non-null    int64  
 1   Survived     891 non-null    int64  
 2   Pclass       891 non-null    int64  
 3   Name         891 non-null    object 
 4   Sex          891 non-null    object 
 5   Age          714 non-null    float64
 6   SibSp        891 non-null    int64  
 7   Parch        891 non-null    int64  
 8   Ticket       891 non-null    object 
 9   Fare         891 non-null    float64
 10  Cabin        204 non-null    object 
 11  Embarked     889 non-null    object 
dtypes: float64(2), int64(5), object(5)
memory usage: 83.7+ KB
</code></pre>
<ul>
<li>NAME 피처확인</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_df[<span class="string">&#x27;Name&#x27;</span>][:<span class="number">5</span>]</span><br></pre></td></tr></table></figure>




<pre><code>0                              Braund, Mr. Owen Harris
1    Cumings, Mrs. John Bradley (Florence Briggs Th...
2                               Heikkinen, Miss. Laina
3         Futrelle, Mrs. Jacques Heath (Lily May Peel)
4                             Allen, Mr. William Henry
Name: Name, dtype: object
</code></pre>
<ul>
<li>호칭의 패턴을 보고 데이터 추출</li>
<li>정규 표현식 키워드</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">train_df[<span class="string">&#x27;Initial&#x27;</span>] = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> [train_df, test]:</span><br><span class="line">    train_df[<span class="string">&#x27;Initial&#x27;</span>] = train_df[<span class="string">&#x27;Name&#x27;</span>].<span class="built_in">str</span>.extract(<span class="string">&#x27;([A-Za-z]+)\.&#x27;</span>) <span class="comment"># </span></span><br><span class="line">    test[<span class="string">&#x27;Initial&#x27;</span>] = test[<span class="string">&#x27;Name&#x27;</span>].<span class="built_in">str</span>.extract(<span class="string">&#x27;([A-Za-z]+)\.&#x27;</span>) <span class="comment"># </span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_df[[<span class="string">&#x27;Name&#x27;</span>,<span class="string">&#x27;Initial&#x27;</span>]].head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Initial</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Braund, Mr. Owen Harris</td>
      <td>Mr</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Heikkinen, Miss. Laina</td>
      <td>Miss</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>Mrs</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Allen, Mr. William Henry</td>
      <td>Mr</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(train_df[<span class="string">&#x27;Initial&#x27;</span>],train_df[<span class="string">&#x27;Sex&#x27;</span>]).T</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Initial</th>
      <th>Capt</th>
      <th>Col</th>
      <th>Countess</th>
      <th>Don</th>
      <th>Dr</th>
      <th>Jonkheer</th>
      <th>Lady</th>
      <th>Major</th>
      <th>Master</th>
      <th>Miss</th>
      <th>Mlle</th>
      <th>Mme</th>
      <th>Mr</th>
      <th>Mrs</th>
      <th>Ms</th>
      <th>Rev</th>
      <th>Sir</th>
    </tr>
    <tr>
      <th>Sex</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>female</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>182</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>125</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>male</th>
      <td>1</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>40</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>517</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(test[<span class="string">&#x27;Initial&#x27;</span>], test[<span class="string">&#x27;Sex&#x27;</span>]).T</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Initial</th>
      <th>Col</th>
      <th>Dona</th>
      <th>Dr</th>
      <th>Master</th>
      <th>Miss</th>
      <th>Mr</th>
      <th>Mrs</th>
      <th>Ms</th>
      <th>Rev</th>
    </tr>
    <tr>
      <th>Sex</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>female</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>78</td>
      <td>0</td>
      <td>72</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>male</th>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>21</td>
      <td>0</td>
      <td>240</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>미성년자, MISS, MR, MRS, OTHER</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">b4_title    = [<span class="string">&#x27;Mlle&#x27;</span>,<span class="string">&#x27;Mme&#x27;</span>,<span class="string">&#x27;Ms&#x27;</span>,<span class="string">&#x27;Dr&#x27;</span>,<span class="string">&#x27;Major&#x27;</span>,<span class="string">&#x27;Lady&#x27;</span>,<span class="string">&#x27;Countess&#x27;</span>,<span class="string">&#x27;Jonkheer&#x27;</span>,<span class="string">&#x27;Col&#x27;</span>,<span class="string">&#x27;Rev&#x27;</span>,<span class="string">&#x27;Capt&#x27;</span>,<span class="string">&#x27;Sir&#x27;</span>,<span class="string">&#x27;Don&#x27;</span>, <span class="string">&#x27;Dona&#x27;</span>]</span><br><span class="line">after_title = [<span class="string">&#x27;Miss&#x27;</span>,<span class="string">&#x27;Miss&#x27;</span>,<span class="string">&#x27;Miss&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>,<span class="string">&#x27;Mrs&#x27;</span>,<span class="string">&#x27;Mrs&#x27;</span>,<span class="string">&#x27;Other&#x27;</span>,<span class="string">&#x27;Other&#x27;</span>,<span class="string">&#x27;Other&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>, <span class="string">&#x27;Miss&#x27;</span>]</span><br><span class="line"></span><br><span class="line">train_df[<span class="string">&#x27;Initial&#x27;</span>] = train_df[<span class="string">&#x27;Initial&#x27;</span>].replace(b4_title, after_title)</span><br><span class="line">train_df.shape</span><br></pre></td></tr></table></figure>




<pre><code>(891, 13)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">test[<span class="string">&#x27;Initial&#x27;</span>] = test[<span class="string">&#x27;Initial&#x27;</span>].replace(b4_title,after_title)</span><br><span class="line">test.shape</span><br></pre></td></tr></table></figure>




<pre><code>(418, 12)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ini_age_df = train_df.groupby(<span class="string">&#x27;Initial&#x27;</span>)[<span class="string">&#x27;Age&#x27;</span>].mean()</span><br><span class="line">ini_age_df</span><br></pre></td></tr></table></figure>




<pre><code>Initial
Master     4.574167
Miss      21.860000
Mr        32.739609
Mrs       35.981818
Other     45.888889
Name: Age, dtype: float64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini_age_df[<span class="string">&#x27;Master&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>4.574166666666667
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">train_df.loc[(train_df[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(train_df[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Mr&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">33</span></span><br><span class="line">train_df.loc[(train_df[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(train_df[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Mrs&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">36</span></span><br><span class="line">train_df.loc[(train_df[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(train_df[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Master&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">5</span></span><br><span class="line">train_df.loc[(train_df[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(train_df[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Miss&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">22</span></span><br><span class="line">train_df.loc[(train_df[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(train_df[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Other&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">46</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">test.loc[(test[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(test[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Mr&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">33</span></span><br><span class="line">test.loc[(test[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(test[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Mrs&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">39</span></span><br><span class="line">test.loc[(test[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(test[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Master&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">8</span></span><br><span class="line">test.loc[(test[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(test[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Miss&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">22</span></span><br><span class="line">test.loc[(test[<span class="string">&#x27;Age&#x27;</span>].isnull())&amp;(test[<span class="string">&#x27;Initial&#x27;</span>]==<span class="string">&#x27;Other&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">43</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Fare Median</span></span><br><span class="line">test[<span class="string">&#x27;Fare&#x27;</span>] = test[<span class="string">&#x27;Fare&#x27;</span>].fillna(np.mean(test[<span class="string">&#x27;Fare&#x27;</span>]))</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_df[<span class="string">&#x27;Embarked&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>S    644
C    168
Q     77
Name: Embarked, dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">train_df[<span class="string">&#x27;Embarked&#x27;</span>] = train_df[<span class="string">&#x27;Embarked&#x27;</span>].fillna(<span class="string">&#x27;S&#x27;</span>)</span><br><span class="line">train_df[<span class="string">&#x27;Embarked&#x27;</span>].isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<pre><code>0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">column = <span class="string">&#x27;Initial&#x27;</span></span><br><span class="line">plot_bar(train_df, column)</span><br></pre></td></tr></table></figure>


<p><img src="/images/0718/output_37_0.png" alt="png"></p>
<h2 id="Feature-제거"><a href="#Feature-제거" class="headerlink" title="Feature 제거"></a>Feature 제거</h2><ul>
<li>불필요한 컬럼을 제거한다<ul>
<li>Name 피처 제거</li>
<li>Ticket 피처 제거(무작위 문자열)</li>
<li>Cabin 결측치 너무 많음</li>
<li>Passenger ID 제거</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cols = [<span class="string">&#x27;Name&#x27;</span>, <span class="string">&#x27;Ticket&#x27;</span>, <span class="string">&#x27;Cabin&#x27;</span>, <span class="string">&#x27;PassengerId&#x27;</span>]</span><br><span class="line">train_df = train_df.drop(cols, axis = <span class="number">1</span>)</span><br><span class="line">test = test.drop(cols, axis = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">train_df.shape, test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((891, 9), (418, 8))
</code></pre>
<h2 id="인코딩-변환"><a href="#인코딩-변환" class="headerlink" title="인코딩 변환"></a>인코딩 변환</h2><ul>
<li>ordinal encoding, label encoding, one - hot encoding</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">train_df = pd.get_dummies(train_df)</span><br><span class="line">test = pd.get_dummies(test)</span><br><span class="line"></span><br><span class="line">train_df.shape, test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((891, 16), (418, 15))
</code></pre>
<h2 id="데이터-셋-분리"><a href="#데이터-셋-분리" class="headerlink" title="데이터 셋 분리"></a>데이터 셋 분리</h2><ul>
<li>분류 학습 진행 시, 불균형 데이터셋을 분리할때 종종 쓰는 코드</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deceased = train_df[train_df[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">0</span>].sample(frac=<span class="number">0.5</span>, random_state=<span class="number">42</span>).reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">survived = train_df[train_df[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">deceased_train, deceased_test = train_test_split(deceased, test_size = <span class="number">0.2</span>, random_state=<span class="number">42</span>)</span><br><span class="line">survived_train, survived_test = train_test_split(survived, test_size = <span class="number">0.2</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">deceased_train, deceased_validate = train_test_split(deceased_train, test_size = <span class="number">0.25</span>, random_state=<span class="number">42</span>)</span><br><span class="line">survived_train, survived_validate = train_test_split(survived_train, test_size = <span class="number">0.25</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">deceased_train.shape, deceased_validate.shape, survived_train.shape, survived_validate.shape </span><br></pre></td></tr></table></figure>




<pre><code>((164, 16), (55, 16), (204, 16), (69, 16))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">X_train = pd.concat((deceased_train, survived_train))</span><br><span class="line">X_test = pd.concat((deceased_test, survived_test))</span><br><span class="line">X_validate = pd.concat((deceased_validate, survived_validate))</span><br><span class="line"></span><br><span class="line">y_train = np.array(X_train[<span class="string">&quot;Survived&quot;</span>])</span><br><span class="line">y_test = np.array(X_test[<span class="string">&quot;Survived&quot;</span>])</span><br><span class="line">y_validate = np.array(X_validate[<span class="string">&quot;Survived&quot;</span>])</span><br><span class="line"></span><br><span class="line">X_train = X_train.drop(<span class="string">&quot;Survived&quot;</span>, axis = <span class="number">1</span>)</span><br><span class="line">X_test = X_test.drop(<span class="string">&quot;Survived&quot;</span>, axis = <span class="number">1</span>)</span><br><span class="line">X_validate = X_validate.drop(<span class="string">&quot;Survived&quot;</span>, axis = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">X_train.shape, X_validate.shape, X_test.shape, y_train.shape, y_validate.shape, y_test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((368, 15), (124, 15), (124, 15), (368,), (124,), (124,))
</code></pre>
<h2 id="mlflow-학습-및-평가"><a href="#mlflow-학습-및-평가" class="headerlink" title="mlflow 학습 및 평가"></a>mlflow 학습 및 평가</h2><ul>
<li>모형 만들고, 예측하고, 제출하면 끝</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">ml_model, X_train, y_train</span>):</span><br><span class="line">    ml_model = ml_model.fit(X_train, y_train)</span><br><span class="line">    train_acc = ml_model.score(X_train, y_train)</span><br><span class="line">    mlflow.log_metric(<span class="string">&quot;train_acc&quot;</span>, train_acc)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Train Accuracy: (train_acc:.3%)&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evaluate</span>(<span class="params">ml_model, X_test, y_test</span>):</span><br><span class="line">    eval_acc = ml_model.score(X_test, y_test)</span><br><span class="line">    preds = ml_model.predict(X_test)</span><br><span class="line">    auc_score = roc_auc_score(y_test, preds)</span><br><span class="line">    mlflow.log_metric(<span class="string">&quot;eval_acc&quot;</span>, eval_acc)</span><br><span class="line">    mlflow.log_metric(<span class="string">&quot;auc_score&quot;</span>, auc_score)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Auc Score : <span class="subst">&#123;auc_score:<span class="number">.3</span>%&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Eval Score : <span class="subst">&#123;eval_acc:<span class="number">.3</span>%&#125;</span>&quot;</span>)</span><br><span class="line">    roc_plot = plot_roc_curve(ml_model, X_test, y_test, name=<span class="string">&quot;Scikit-Learn ROC Curve&quot;</span>)</span><br><span class="line">    plt.savefig(<span class="string">&quot;sklearn_roc_plot.png&quot;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line">    plt.clf()</span><br><span class="line">    conf_matrix = confusion_matrix(y_test, preds)</span><br><span class="line">    ax = sns.heatmap(conf_matrix, annot=<span class="literal">True</span>, fmt=<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">    ax.invert_xaxis()</span><br><span class="line">    ax.invert_yaxis()</span><br><span class="line">    plt.ylabel(<span class="string">&quot;Actual&quot;</span>)</span><br><span class="line">    plt.xlabel(<span class="string">&quot;Predicted&quot;</span>)</span><br><span class="line">    plt.title(<span class="string">&quot;Confusion Matrix&quot;</span>)</span><br><span class="line">    plt.savefig(<span class="string">&quot;sklearn_conf_matrix.png&quot;</span>)</span><br><span class="line">    mlflow.log_artifact(<span class="string">&quot;sklearn_roc_plot.png&quot;</span>)</span><br><span class="line">    mlflow.log_artifact(<span class="string">&quot;sklearn_conf_matrix.png&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>테스트</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ml_model = LogisticRegression(random_state=<span class="literal">None</span>, max_iter=<span class="number">400</span>, solver=<span class="string">&#x27;newton-cg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 실험 이름 설정</span></span><br><span class="line">mlflow.set_experiment(<span class="string">&quot;human_sklearn_experiment&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 해당 이름으로 실행 배치</span></span><br><span class="line"><span class="keyword">with</span> mlflow.start_run():</span><br><span class="line">    train(ml_model, X_train, y_train)</span><br><span class="line">    evaluate(ml_model, X_test, y_test)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 하나의 MLFlow 실행 컨텍스트에서 모든 코드를 묶을 수 있음. </span></span><br><span class="line">    <span class="comment"># 참조 : https://mlflow.org/docs/latest/models.html#model-customization</span></span><br><span class="line">    mlflow.sklearn.log_model(ml_model, <span class="string">&#x27;log_reg_model&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 본질적으로 모델과 지표가 로깅되는 현재 실행을 가져오고 출력함. </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Model run: &quot;</span>, mlflow.active_run().info.run_uuid)</span><br><span class="line">mlflow.end_run()</span><br></pre></td></tr></table></figure>

<pre><code>Train Accuracy: (train_acc:.3%)
Auc Score : 78.748%
Eval Score : 79.839%


C:\Users\User\Desktop\mlops_sample\venv\lib\site-packages\sklearn\utils\deprecation.py:87: FutureWarning: Function plot_roc_curve is deprecated; Function :func:`plot_roc_curve` is deprecated in 1.0 and will be removed in 1.2. Use one of the class methods: :meth:`sklearn.metric.RocCurveDisplay.from_predictions` or :meth:`sklearn.metric.RocCurveDisplay.from_estimator`.
  warnings.warn(msg, category=FutureWarning)
</code></pre>
<p><img src="/images/0718/output_48_2.png" alt="png"></p>
<pre><code>Model run:  2728bd4cd7924dd7ba7f51ded4436897


C:\Users\User\Desktop\mlops_sample\venv\lib\site-packages\_distutils_hack\__init__.py:33: UserWarning: Setuptools is replacing distutils.
  warnings.warn(&quot;Setuptools is replacing distutils.&quot;)
</code></pre>
<p><img src="/images/0718/output_48_5.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ml_run_id = <span class="string">&#x27;runs:/2728bd4cd7924dd7ba7f51ded4436897/log_reg_model&#x27;</span></span><br><span class="line">loaded_model = mlflow.sklearn.load_model(ml_run_id)</span><br><span class="line"></span><br><span class="line">final_preds = loaded_model.predict(test)</span><br><span class="line">submission[<span class="string">&#x27;Survived&#x27;</span>]=final_preds</span><br><span class="line">submission.to_csv(DATA_PATH + <span class="string">&quot;submission.csv&quot;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/18/0718/" data-id="cl5qe8yn40000ustvezswgosz" data-title="0718_mlops 배우기" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-0715_exe파일로_변환하기" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/15/0715_exe%ED%8C%8C%EC%9D%BC%EB%A1%9C_%EB%B3%80%ED%99%98%ED%95%98%EA%B8%B0/" class="article-date">
  <time class="dt-published" datetime="2022-07-15T00:00:00.000Z" itemprop="datePublished">2022-07-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/15/0715_exe%ED%8C%8C%EC%9D%BC%EB%A1%9C_%EB%B3%80%ED%99%98%ED%95%98%EA%B8%B0/">0715_exe파일로 변환하기</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="python-파일을-실행파일로-변환하기"><a href="#python-파일을-실행파일로-변환하기" class="headerlink" title="python 파일을 실행파일로 변환하기"></a>python 파일을 실행파일로 변환하기</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"># 가상환경에 접속한다.</span><br><span class="line"></span><br><span class="line"># 가상환경에서 pip install을 설치한다</span><br><span class="line">pip install pyinstaller</span><br><span class="line"></span><br><span class="line"># 파일이 위치한 파일에서 pyinstaller을 활용하여 파일을 생성한다.</span><br><span class="line">pyinstaller 파일이름.py</span><br><span class="line"></span><br><span class="line"># dist 파일에서 생성된 파일을 클릭하여 실행시킨다.</span><br><span class="line"></span><br><span class="line"># 콘솔창이 제거된 후 실행시키려면 -w을 활용한다.</span><br><span class="line">pyinstaller -w 파일이름.py</span><br><span class="line"></span><br><span class="line"># 실행 파일 한개만 생성하려면 -F 또는 -onefile을 활용한다.</span><br><span class="line">pyinstaller -w -F 파일이름.py</span><br><span class="line">pyinstaller -w -onefile 파일이름.py</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/15/0715_exe%ED%8C%8C%EC%9D%BC%EB%A1%9C_%EB%B3%80%ED%99%98%ED%95%98%EA%B8%B0/" data-id="cl5lup1wf00007ctvdy4sh3o9" data-title="0715_exe파일로 변환하기" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-계산기_만들기" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/15/%EA%B3%84%EC%82%B0%EA%B8%B0_%EB%A7%8C%EB%93%A4%EA%B8%B0/" class="article-date">
  <time class="dt-published" datetime="2022-07-15T00:00:00.000Z" itemprop="datePublished">2022-07-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/15/%EA%B3%84%EC%82%B0%EA%B8%B0_%EB%A7%8C%EB%93%A4%EA%B8%B0/">0715_계산기 만들기</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="계산기-만들기"><a href="#계산기-만들기" class="headerlink" title="계산기 만들기"></a>계산기 만들기</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">## 계산기 만들기</span><br><span class="line"></span><br><span class="line">## 필요한 모듈, 라이브러리를 불러온다.</span><br><span class="line">import sys</span><br><span class="line">from PyQt5.QtWidgets import *</span><br><span class="line"></span><br><span class="line">## 클래스를 생성한다.</span><br><span class="line">class Main(QDialog):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        super().__init__()</span><br><span class="line">        self.init_ui()</span><br><span class="line"></span><br><span class="line">    def init_ui(self):</span><br><span class="line">        main_layout = QVBoxLayout()</span><br><span class="line"></span><br><span class="line">        ### 각 위젯을 배치할 레이아웃을 미리 만들어 놓는다.</span><br><span class="line">        layout_operation = QHBoxLayout()</span><br><span class="line">        layout_clear_equal = QHBoxLayout()</span><br><span class="line">        layout_number = QGridLayout()</span><br><span class="line">        layout_equation_solution = QFormLayout()</span><br><span class="line"></span><br><span class="line">        ### 수식 입력과 답 출력을 위한 LineEdit 위젯 생성한다.</span><br><span class="line">        label_equation = QLabel(&quot;Equation: &quot;)</span><br><span class="line">        label_solution = QLabel(&quot;Solution: &quot;)</span><br><span class="line">        self.equation = QLineEdit(&quot;&quot;)</span><br><span class="line">        self.solution = QLineEdit(&quot;&quot;)</span><br><span class="line"></span><br><span class="line">        ### layout_equation_solution 레이아웃에 수식, 답 위젯을 추가한다.</span><br><span class="line">        layout_equation_solution.addRow(label_equation, self.equation)</span><br><span class="line">        layout_equation_solution.addRow(label_solution, self.solution)</span><br><span class="line"></span><br><span class="line">        ### 사칙연산 버튼 생성한다.</span><br><span class="line">        button_plus = QPushButton(&quot;+&quot;)</span><br><span class="line">        button_minus = QPushButton(&quot;-&quot;)</span><br><span class="line">        button_product = QPushButton(&quot;x&quot;)</span><br><span class="line">        button_division = QPushButton(&quot;/&quot;)</span><br><span class="line"></span><br><span class="line">        ### 사칙연산 버튼을 클릭했을 때, 각 사칙연산 부호가 수식창에 추가될 수 있도록 시그널을 설정한다.</span><br><span class="line">        button_plus.clicked.connect(lambda state, operation = &quot;+&quot;: self.button_operation_clicked(operation))</span><br><span class="line">        button_minus.clicked.connect(lambda state, operation = &quot;-&quot;: self.button_operation_clicked(operation))</span><br><span class="line">        button_product.clicked.connect(lambda state, operation = &quot;*&quot;: self.button_operation_clicked(operation))</span><br><span class="line">        button_division.clicked.connect(lambda state, operation = &quot;/&quot;: self.button_operation_clicked(operation))</span><br><span class="line"></span><br><span class="line">        ### 사칙연산 버튼을 layout_operation 레이아웃에 추가한다.</span><br><span class="line">        layout_operation.addWidget(button_plus)</span><br><span class="line">        layout_operation.addWidget(button_minus)</span><br><span class="line">        layout_operation.addWidget(button_product)</span><br><span class="line">        layout_operation.addWidget(button_division)</span><br><span class="line"></span><br><span class="line">        ### =, clear, backspace 버튼 생성한다.</span><br><span class="line">        button_equal = QPushButton(&quot;=&quot;)</span><br><span class="line">        button_clear = QPushButton(&quot;Clear&quot;)</span><br><span class="line">        button_backspace = QPushButton(&quot;Backspace&quot;)</span><br><span class="line"></span><br><span class="line">        ### =, clear, backspace 버튼 클릭 시 시그널을 설정한다.</span><br><span class="line">        button_equal.clicked.connect(self.button_equal_clicked)</span><br><span class="line">        button_clear.clicked.connect(self.button_clear_clicked)</span><br><span class="line">        button_backspace.clicked.connect(self.button_backspace_clicked)</span><br><span class="line"></span><br><span class="line">        ### =, clear, backspace 버튼을 layout_clear_equal 레이아웃에 추가한다.</span><br><span class="line">        layout_clear_equal.addWidget(button_clear)</span><br><span class="line">        layout_clear_equal.addWidget(button_backspace)</span><br><span class="line">        layout_clear_equal.addWidget(button_equal)</span><br><span class="line"></span><br><span class="line">        ### 숫자 버튼 생성하고, layout_number 레이아웃에 추가</span><br><span class="line">        ### 각 숫자 버튼을 클릭했을 때, 숫자가 수식창에 입력 될 수 있도록 시그널 설정</span><br><span class="line">        number_button_dict = &#123;&#125;</span><br><span class="line">        for number in range(0, 10):</span><br><span class="line">            number_button_dict[number] = QPushButton(str(number))</span><br><span class="line">            number_button_dict[number].clicked.connect(lambda state, num = number:</span><br><span class="line">                                                       self.number_button_clicked(num))</span><br><span class="line">            if number &gt;0:</span><br><span class="line">                x,y = divmod(number-1, 3)</span><br><span class="line">                layout_number.addWidget(number_button_dict[number], x, y)</span><br><span class="line">            elif number==0:</span><br><span class="line">                layout_number.addWidget(number_button_dict[number], 3, 1)</span><br><span class="line"></span><br><span class="line">        ### 소숫점 버튼과 00 버튼을 입력하고 시그널을 설정한다.</span><br><span class="line">        button_dot = QPushButton(&quot;.&quot;)</span><br><span class="line">        button_dot.clicked.connect(lambda state, num = &quot;.&quot;: self.number_button_clicked(num))</span><br><span class="line">        layout_number.addWidget(button_dot, 3, 2)</span><br><span class="line"></span><br><span class="line">        button_double_zero = QPushButton(&quot;00&quot;)</span><br><span class="line">        button_double_zero.clicked.connect(lambda state, num = &quot;00&quot;: self.number_button_clicked(num))</span><br><span class="line">        layout_number.addWidget(button_double_zero, 3, 0)</span><br><span class="line"></span><br><span class="line">        ### 각 레이아웃을 main_layout 레이아웃에 추가한다.</span><br><span class="line">        main_layout.addLayout(layout_equation_solution)</span><br><span class="line">        main_layout.addLayout(layout_operation)</span><br><span class="line">        main_layout.addLayout(layout_clear_equal)</span><br><span class="line">        main_layout.addLayout(layout_number)</span><br><span class="line"></span><br><span class="line">        self.setLayout(main_layout)</span><br><span class="line">        self.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def number_button_clicked(self, num):</span><br><span class="line">        equation = self.equation.text()</span><br><span class="line">        equation += str(num)</span><br><span class="line">        self.equation.setText(equation)</span><br><span class="line"></span><br><span class="line">    def button_operation_clicked(self, operation):</span><br><span class="line">        equation = self.equation.text()</span><br><span class="line">        equation += operation</span><br><span class="line">        self.equation.setText(equation)</span><br><span class="line"></span><br><span class="line">    def button_equal_clicked(self):</span><br><span class="line">        equation = self.equation.text()</span><br><span class="line">        solution = eval(equation)</span><br><span class="line">        self.solution.setText(str(solution))</span><br><span class="line"></span><br><span class="line">    def button_clear_clicked(self):</span><br><span class="line">        self.equation.setText(&quot;&quot;)</span><br><span class="line">        self.solution.setText(&quot;&quot;)</span><br><span class="line"></span><br><span class="line">    def button_backspace_clicked(self):</span><br><span class="line">        equation = self.equation.text()</span><br><span class="line">        equation = equation[:-1]</span><br><span class="line">        self.equation.setText(equation)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    main = Main()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://kimsunhyung.github.io/2022/07/15/%EA%B3%84%EC%82%B0%EA%B8%B0_%EB%A7%8C%EB%93%A4%EA%B8%B0/" data-id="cl5lup1ws00017ctvbfev9j3z" data-title="0715_계산기 만들기" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/07/27/0727_WSL2%EC%84%A4%EC%B9%98_WINDOW%20SUBSYSTEM%20FOR%20linux%EC%84%A4%EC%B9%98/">0727 WSL2 설치</a>
          </li>
        
          <li>
            <a href="/2022/07/26/0726_crawling%EA%B8%B0%EC%B4%88/">0726_crawling기초</a>
          </li>
        
          <li>
            <a href="/2022/07/26/0726_crawling%EA%B8%B0%EC%B4%882/">0726_crawling기초2</a>
          </li>
        
          <li>
            <a href="/2022/07/22/0722_oracle_%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%953/">0722_oracle_sql 기초문법3</a>
          </li>
        
          <li>
            <a href="/2022/07/21/0721_oracler_sql%EA%B8%B0%EC%B4%88%EB%AC%B8%EB%B2%952/">0721_oracle_sql 기초문법2</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>